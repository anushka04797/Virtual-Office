(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[43],{1567:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return I}));var n=t(30),s=t(11),i=t(0),o=t(1577),r=t(1578),l=t(1568),c=t(1570),d=t(1598),u=t(1581),m=t(1595),h=t(1103),g=t.n(h),b=t(1584),j=t(1599),p=t(150),f=t(1580),v=t(522),O=t(8),x=t(10),w=t(94),S=t(508),y=t.n(S),k=t(5);function C(e){return Object(k.jsxs)(b.a,Object(s.a)(Object(s.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(k.jsx)(d.a,{color:"inherit",href:"https://dma.com.bd/",children:"Datasoft Manufacturing & Assembly Inc"})," ",(new Date).getFullYear(),"."]}))}var D=Object(p.a)();function I(){var e=Object(x.g)(),a=Object(w.b)(),t=a.enqueueSnackbar,s=(a.closeSnackbar,i.useState("/dashboard/WBS/board")),h=Object(n.a)(s,2),p=h[0],S=h[1],I=Object(x.h)();i.useEffect((function(){var e;if(null!==(e=I.state)&&void 0!==e&&e.registration&&t("Registration Succefull, please wait for admin approval.",{variant:"info"}),String(window.location).split("?").length>1){var a=String(window.location).split("?")[1].split("=");a.length>0&&"task_details"==a[0]&&S("/dashboard/task/details/"+a[1])}}),[]);var q=Object(v.a)({initialValues:{email:"",password:""},validateOnChange:!0,validateOnBlur:!0,validate:function(e){console.log(e);var a={};return e.email||(a.email="Email is required!"),e.password||(a.password="Password is required!"),console.log(a),a},onSubmit:function(a,n){var s=n.setSubmitting;O.h.post("auth/login/",q.values).then((function(a){if(s(!1),console.log("login response",a.data),200==a.status&&"True"==a.data.success){sessionStorage.setItem(O.j,a.data.token);var t=new Date;sessionStorage.setItem("TOKEN",JSON.stringify({time:new Date(t.getFullYear(),t.getMonth(),t.getDate()+2,t.getUTCHours(),t.getMinutes(),t.getSeconds()),data:a.data.token})),sessionStorage.setItem(O.k,a.data.user_id),O.a.get("auth/permissions/all/").then((function(a){console.log("permissions",a.data.data),Array.from(a.data.data).length>0?(sessionStorage.setItem(O.g,a.data.data),e.push({pathname:p,state:{from:"login"}})):(sessionStorage.clear(),y()("No Permissions","Please contact your admin","error"))}))}})).catch((function(e){var a,n;s(!1),console.log(e),null!==e&&void 0!==e&&null!==(a=e.response)&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.message&&t(e.response.data.message,{variant:"warning"})}))}});return Object(k.jsx)(f.a,{theme:D,children:Object(k.jsxs)(j.a,{component:"main",maxWidth:"xs",children:[Object(k.jsx)(l.a,{}),Object(k.jsxs)(m.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(k.jsx)(o.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(k.jsx)(g.a,{})}),Object(k.jsx)(b.a,{component:"h1",variant:"h4",children:"Virtual Office"}),Object(k.jsx)(b.a,{component:"h1",variant:"h6",children:"Sign in"}),Object(k.jsxs)(m.a,{component:"form",onSubmit:q.handleSubmit,noValidate:!0,sx:{mt:1},children:[Object(k.jsx)(c.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",name:"email",value:q.values.email,onChange:q.handleChange,label:"Email Address",autoComplete:"email",autoFocus:!0}),Object(k.jsx)(c.a,{margin:"normal",required:!0,fullWidth:!0,id:"password",name:"password",value:q.values.password,onChange:q.handleChange,onKeyPress:function(e){"Enter"===e.key&&q.handleSubmit()},label:"Password",type:"password",autoComplete:"current-password"}),Object(k.jsx)(r.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:!q.isValid,children:"Sign In"}),Object(k.jsxs)(u.a,{container:!0,children:[Object(k.jsx)(u.a,{item:!0,xs:!0,children:Object(k.jsx)(d.a,{href:"#/forgot-password",variant:"body2",children:"Forgot password?"})}),Object(k.jsx)(u.a,{item:!0,children:Object(k.jsx)(d.a,{href:"#/register",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),Object(k.jsx)(C,{sx:{mt:8,mb:4}})]})})}}}]);
//# sourceMappingURL=43.c5bdcfea.chunk.js.map