(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[27],{564:function(e,s,a){"use strict";s.a=a.p+"static/media/Showpass-show.ab5421f5.svg"},565:function(e,s,a){"use strict";s.a=a.p+"static/media/Hide.31c620fc.svg"},883:function(e,s,a){},884:function(e,s,a){},960:function(e,s,a){"use strict";a.r(s);var l=a(33),c=a(486),t=a(483),n=a(503),i=a(0),o=(a(883),a(884),a(564)),r=a(565),d=a(3),m=a(93),j=a(506),u=a(8),b=a(111),h=a(494),p=a.n(h);s.default=function(){var e=Object(i.useState)(!1),s=Object(l.a)(e,2),a=s[0],h=s[1],O=Object(i.useState)(!1),f=Object(l.a)(O,2),x=f[0],v=f[1],g=Object(i.useState)(!1),w=Object(l.a)(g,2),N=w[0],_=w[1],C=Object(m.c)((function(e){return e.profile.data}));console.log(C);var y=Object(i.useState)(""),P=Object(l.a)(y,2),F=P[0],S=P[1],B=Object(i.useRef)(null),k=Object(i.useState)(),A=Object(l.a)(k,2),I=(A[0],A[1]),U=Object(i.useState)(C?u.b+C.profile_pic:"avatars/user-avatar-default.png"),E=Object(l.a)(U,2),R=E[0],V=E[1],q=Object(i.useState)(!1),L=Object(l.a)(q,2),D=L[0],G=L[1],H=Object(m.b)(),J=function(){console.log("values"),G(!D),Q.setValues({first_name:C.first_name,last_name:C.last_name,email:C.email,phone:C.phone,address:C.address,blood_group:C.blood_group})},T=Object(j.a)({initialValues:{old_password:"",new_password:"",new_password_confirm:""},validateOnChange:!0,validateOnBlur:!0,validate:function(e){var s={};return e.old_password||(s.old_password="Old Password Required"),(String(e.new_password).length<8||!e.new_password||e.new_password!=e.new_password_confirm)&&(s.new_password="Invalid New Password"),s},onSubmit:function(e){var s=new FormData;console.log("values",e);for(var a=0,c=Object.entries(T.values);a<c.length;a++){var t=Object(l.a)(c[a],2),n=t[0],i=t[1];"new_password_confirm"!=n&&s.append(n,i)}u.a.put("auth/change/password/",s).then((function(e){console.log(e),200==e.status&&(T.resetForm(),p()("Updated","Your Password has been changed","success"))})).catch((function(e){400==e.response.status&&p()("Incorrect","Bad Request","warning")}))}}),Y=function(e){var s=new FormData;s.append("profile_pic",e),console.log("image",e),u.c.post("auth/change/profile/image/"+sessionStorage.getItem(u.j)+"/",s).then((function(e){201==e.status&&p()("Updated!","Profile Picture Updated","success")})).catch((function(e){400==e.status&&p()("Incorrect","Bad Request","warning")}))};Object(i.useEffect)((function(){window.scrollTo(0,0),S({value:C.blood_group,label:C.blood_group}),V(C.profile_pic?u.b+C.profile_pic:"avatars/user-avatar-default.png")}),[C]);var Q=Object(j.a)({initialValues:{first_name:"",last_name:"",email:"",phone:"",address:"",blood_group:""},validateOnChange:!0,validateOnBlur:!0,validate:function(e){var s={};return e.first_name||(s.first_name="First Name is required"),e.last_name||(s.last_name="Last Name is required"),e.email||(s.email="Email is required"),s},onSubmit:function(e){console.log(e),u.a.post("auth/profile/update/"+sessionStorage.getItem(u.j)+"/",Q.values).then((function(e){console.log(e),201==e.status&&"True"==e.data.success&&(H(Object(b.b)(sessionStorage.getItem(u.j))),G(!1),p()("Updated!","Your Profile has been updated","success"))}))}});function z(e){return void 0!=e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(t.l,{children:[Object(d.jsxs)(t.A,{closeOnBackdrop:!1,alignment:"center",show:D,onClose:J,children:[Object(d.jsx)(t.C,{closeButton:!0,children:Object(d.jsx)(t.D,{className:"modal-title-profile",children:Object(d.jsx)("span",{className:"edit-profile-form-header",children:"Edit Profile Info"})})}),Object(d.jsx)(t.B,{children:Object(d.jsx)(t.l,{children:Object(d.jsx)(t.t,{children:Object(d.jsxs)(t.I,{children:[Object(d.jsxs)("div",{className:"col-md-6 mb-3",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"userFName",children:"First Name"}),Object(d.jsx)(t.x,{type:"text",name:"first_name",id:"first_name",className:"custom-forminput-6",value:Q.values.first_name,onChange:Q.handleChange})]}),Object(d.jsxs)("div",{className:"col-md-6 mb-3",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"userLName",children:"Last Name"}),Object(d.jsx)(t.x,{type:"text",name:"last_name",id:"last_name",className:"custom-forminput-6",value:Q.values.last_name,onChange:Q.handleChange})]}),Object(d.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"uEmail",children:"Email"}),Object(d.jsx)(t.x,{type:"email",name:"email",id:"email",className:"custom-forminput-6",value:Q.values.email,onChange:Q.handleChange,readOnly:!0})]}),Object(d.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"uPhoneNo",children:"Phone"}),Object(d.jsx)(t.x,{type:"tel",name:"phone",id:"phone",value:Q.values.phone,onChange:Q.handleChange,className:"custom-forminput-6"})]}),Object(d.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"Address",children:"Address"}),Object(d.jsx)(t.x,{type:"text",name:"address",id:"address",value:Q.values.address,onChange:Q.handleChange,className:"custom-forminput-6"})]}),Object(d.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"blood_group",children:"Blood Group"}),Object(d.jsx)(n.a,{id:"blood_group",value:F,onChange:function(e){console.log(e),Q.setValues({first_name:Q.values.first_name,last_name:Q.values.last_name,email:Q.values.email,phone:Q.values.phone,address:Q.values.address,blood_group:e.value}),S({value:e.value,label:e.label})},className:"custom-forminput-6",options:[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"}]})]}),Object(d.jsx)("div",{className:"col-md-12 ",children:Object(d.jsxs)("div",{className:"project-form-button-holders mt-3",children:[Object(d.jsx)(t.f,{className:"profile-form-btn update-profile",onClick:Q.handleSubmit,type:"button",disabled:!Q.isValid,children:"Update Info"}),Object(d.jsx)(t.f,{className:"profile-form-btn cancel-update",type:"reset",onClick:function(){return G(!D)},children:"Cancel"})]})})]})})})})]}),Object(d.jsxs)(t.S,{activeTab:"viewProfile",children:[Object(d.jsxs)(t.E,{variant:"tabs",className:"tab-style",children:[Object(d.jsx)(t.F,{children:Object(d.jsxs)(t.G,{"data-tab":"viewProfile",className:"special",children:[Object(d.jsx)(c.a,{name:"cil-user"})," View Profile"]})}),Object(d.jsx)(t.F,{children:Object(d.jsxs)(t.G,{"data-tab":"changePassword",className:"special",children:[Object(d.jsx)(c.a,{name:"cil-pen-alt",className:"mr-1"}),"Change Password"]})})]}),Object(d.jsxs)(t.Q,{children:[Object(d.jsx)(t.R,{"data-tab":"viewProfile",children:C&&Object(d.jsxs)(t.l,{children:[Object(d.jsx)("h3",{className:"profile-page-header",children:"Profile Details"}),Object(d.jsx)(t.I,{children:Object(d.jsx)("div",{className:"col-lg-8 offset-lg-2",children:Object(d.jsxs)(t.g,{className:"card-view-profile mt-3",children:[Object(d.jsxs)("div",{className:"user-profile-pic-div text-center",children:[Object(d.jsx)(t.w,{alt:"click to upload image",className:"mx-auto rounded-circle update-img",src:R}),Object(d.jsx)("input",{style:{display:"none"},ref:B,type:"file",onChange:function(e){!function(e){I(e),V(URL.createObjectURL(e)),Y(e)}(e.target.files[0])}}),Object(d.jsxs)(t.f,{onClick:function(){B.current.click()},type:"button",className:"d-block mx-auto change-img-btn mt-1",children:[" ",Object(d.jsx)(c.a,{name:"cil-camera"})," Change Picture"]})]}),Object(d.jsxs)(t.h,{children:[Object(d.jsx)("hr",{}),Object(d.jsxs)(t.f,{className:"edit-profile mb-3",onClick:function(){return J()},children:[Object(d.jsx)(c.a,{name:"cil-pen",className:"mr-1"}),"Edit Info"]}),Object(d.jsxs)("div",{className:"row justify-content-center",children:[Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:"Full Name"}),Object(d.jsxs)("h5",{className:"profile-details-points child",children:[z(C.first_name)+" "+z(C.last_name)," "]})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:" Email"}),Object(d.jsx)("h5",{className:"profile-details-points-email",children:C.email})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:"Job title"}),Object(d.jsx)("h5",{className:"profile-details-points-email",children:null===C||void 0===C?void 0:C.slc_details.slc.name})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:" Phone"}),Object(d.jsxs)("h5",{className:"profile-details-points child",children:["+",C.phone]})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:" Address"}),Object(d.jsx)("h5",{className:"profile-details-points child",children:C.address})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:" Blood Group"}),Object(d.jsx)("h5",{className:"profile-details-points child",children:C.blood_group})]})]})]})]})})})]})}),Object(d.jsx)(t.R,{"data-tab":"changePassword",children:Object(d.jsxs)(t.l,{children:[Object(d.jsx)("h3",{className:"profile-page-header",children:"Change Password"}),Object(d.jsx)(t.I,{children:Object(d.jsx)("div",{className:"col-lg-8 offset-lg-2 col-md-12",children:Object(d.jsx)(t.g,{className:"mt-4 card-change-password",children:Object(d.jsx)(t.h,{children:Object(d.jsxs)(t.t,{children:[Object(d.jsxs)("div",{className:"mb-2",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"userOldPass",children:"Old Password"}),Object(d.jsxs)("div",{className:"password-container",children:[Object(d.jsx)(t.x,{type:a?"text":"password",name:"old_password",id:"old_password",className:"custom-forminput-6",value:T.values.old_password,onChange:T.handleChange}),Object(d.jsx)("img",{className:"pwd-container-img",title:a?"Hide Old password":"Show Old password",src:a?o.a:r.a,onClick:function(){return h((function(e){return!e}))}})]})]}),Object(d.jsxs)("div",{className:"mb-2",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"userNewPass",children:"New Password"}),Object(d.jsxs)("div",{className:"password-container",children:[Object(d.jsx)(t.x,{type:x?"text":"password",name:"new_password",id:"new_password",className:"custom-forminput-6",value:T.values.new_password,onChange:T.handleChange}),Object(d.jsx)("img",{className:"pwd-container-img",title:x?"Hide New password":"Show New password",src:x?o.a:r.a,onClick:function(){return v((function(e){return!e}))}})]})]}),Object(d.jsxs)("div",{className:"mb-2",children:[Object(d.jsx)(t.y,{className:"custom-label-5",htmlFor:"userConfPass",children:"Confirm Password"}),Object(d.jsxs)("div",{className:"password-container",children:[Object(d.jsx)(t.x,{type:N?"text":"password",name:"new_password_confirm",id:"new_password_confirm",className:"custom-forminput-6",value:T.values.new_password_confirm,onChange:T.handleChange}),Object(d.jsx)("img",{className:"pwd-container-img",title:N?"Hide Confirm password":"Show Confirm password",src:N?o.a:r.a,onClick:function(){return _((function(e){return!e}))}})]})]}),Object(d.jsxs)("div",{className:"project-form-button-holders mt-3",children:[Object(d.jsx)(t.f,{className:"profile-form-btn update-profile",disabled:!T.isValid,type:"button",onClick:T.handleSubmit,children:"Update Password"}),Object(d.jsx)(t.f,{className:"profile-form-btn cancel-update",type:"button",onClick:T.resetForm,children:"Cancel"})]})]})})})})})]})})]})]})]})})}}}]);
//# sourceMappingURL=27.4b8d9562.chunk.js.map