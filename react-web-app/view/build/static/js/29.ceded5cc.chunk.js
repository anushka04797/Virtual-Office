(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[29],{1118:function(e,t,a){"use strict";a.r(t);var r=a(31),s=a(0),n=a.n(s),o=(a(1119),a(515)),l=a(493),i=a(580),c=a.n(i),d=(a(73),a(96)),p=a(10),_=a(8),u=a(7);t.default=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),i=(t[0],t[1]),g=Object(s.useState)([]),j=Object(r.a)(g,2),f=j[0],v=j[1],h=Object(s.useState)([]),k=Object(r.a)(h,2),b=k[0],m=k[1],y=Object(s.useState)([]),w=Object(r.a)(y,2),O=(w[0],w[1]),x=Object(s.useState)([]),S=Object(r.a)(x,2),D=S[0],T=S[1],A=Object(s.useState)([]),N=Object(r.a)(A,2),B=N[0],C=N[1],W=Object(p.g)(),P=Object(s.useState)([]),E=Object(r.a)(P,2),z=E[0],F=E[1],J=Object(s.useState)([]),K=Object(r.a)(J,2),L=K[0],M=K[1],U=Object(s.useState)([]),q=Object(r.a)(U,2),G=q[0],H=q[1],I=Object(d.c)((function(e){var t=[];return Array.from(e.projects.pm_projects).forEach((function(e,a){t.push(e)})),t})),Q=Object(s.useState)(I),R=Object(r.a)(Q,2),V=R[0],X=R[1],Y=function(e){var t=[];if(console.log("filter",e),e.find((function(e){return"all"==e.value})))t.push(b),console.log("temp all",t);else{for(var a=0;a<e.length;a++)for(var r=0;r<b.length;r++)e[a].value==b[r].data.project.task_delivery_order.id&&(console.log(e[a].value,"matched! ",b[r].data.project.task_delivery_order.id),t.push(b[r].data));console.log("filtered array",t)}!function(e){console.log("data passed",e);for(var t=[],a=0;a<e.length;a++){for(var r=[],s=[],n=e[a].allassignees,o=e[a].assignees,l=0;l<n.length;l++){var i=Z(n[l].assignee.first_name)+" "+Z(n[l].assignee.last_name);r.push(i)}for(var c=0;c<o.length;c++){var d=Z(o[c].assignee.first_name)+" "+Z(o[c].assignee.last_name);s.push(d)}0!=e[a].assignees.length&&t.push({TDO:e[a].project.task_delivery_order.title,"Sub Task":e[a].project.sub_task,"Task Title":e[a].project.task_title,"Planned Delivery Date":e[a].project.planned_delivery_date,Assignees:r,"Assignees with no WBS":s,id:e[a].project.id})}console.log("aa",t),T(t);for(var p=[],_=0;_<e.length;_++){var u=e[_].allassignees;p.push({data:e[_],name:e[_].project.sub_task,tdo:e[_].project.task_delivery_order.title,id:e[_].project.task_delivery_order.id,startDate:e[_].project.date_created,endDate:e[_].project.planned_delivery_date,allassignees:e[_].allassignees,everyone:[],total:Number(e[_].assignees.length),assignees:e[_].assignees,wbs:e[_].project.wbs_list.length,nowbspeople:[],taskTitle:e[_].project.task_title});for(var g=0;g<u.length;g++){var j=u[g].assignee.first_name+" "+u[g].assignee.last_name;p[_].everyone.push(j)}for(var f=e[_].assignees,v=0;v<f.length;v++){var h=f[v].assignee.first_name+" "+f[v].assignee.last_name+",";p[_].nowbspeople.push(h)}}console.log("info array from populate",p),X(p);for(var k=[],b=0;b<e.length;b++)e[b].allassignees,k.push({assignees:e[b].allassignees,date_created:e[b].project.date_created,date_updated:e[b].project.date_updated,description:e[b].project.description,estimated_person:e[b].project.estimated_person,id:e[b].project.id,planned_delivery_date:e[b].project.planned_delivery_date,planned_hours:e[b].project.planned_hours,planned_value:e[b].project.planned_value,pm:e[b].project.pm,remaining_hours:e[b].project.remaining_hours,start_date:e[b].project.start_date,status:e[b].project.status,sub_task:e[b].project.sub_task,task_delivery_order:e[b].project.task_delivery_order,task_title:e[b].project.task_title,work_package_index:e[b].project.work_package_index,work_package_number:e[b].project.work_package_number});O(k),console.log("wbsinfoarray",k)}(t)};function Z(e){return void 0!=e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}n.a.useEffect((function(){I.length>0&&0==L.length&&M(I)}),[I]);var $=function(e){var t=new Date,r=a(70),s=r(e).diff(r(t),"days");return console.log("end date",e),console.log("days left ",s+1),!(s+1<=0)};return n.a.useEffect((function(){_.a.get("project/assignees-with-no-wbs/").then((function(e){var t=[];console.log("api response",e.data.data);for(var a=0;a<e.data.data.length;a++)0!=e.data.data[a].assignees.length&&$(e.data.data[a].project.planned_delivery_date)&&t.push(e.data.data[a]);console.log("response",t),C(t);for(var r=[],s=0;s<e.data.data.length;s++)if($(e.data.data[s].project.planned_delivery_date)){for(var n=[],o=[],l=e.data.data[s].allassignees,d=e.data.data[s].assignees,p=0;p<l.length;p++){var _=Z(l[p].assignee.first_name)+" "+Z(l[p].assignee.last_name);n.push(_)}for(var u=0;u<d.length;u++){var g=Z(d[u].assignee.first_name)+" "+Z(d[u].assignee.last_name);o.push(g)}0!=e.data.data[s].assignees.length&&r.push({TDO:e.data.data[s].project.task_delivery_order.title,"Sub Task":e.data.data[s].project.sub_task,"Task Title":e.data.data[s].project.task_title,"Planned Delivery Date":e.data.data[s].project.planned_delivery_date,Assignees:n,"Assignees with no WBS":o,id:e.data.data[s].project.id})}for(var j=[],f=0;f<e.data.data.length;f++)if(0!=e.data.data[f].assignees.length){var h=e.data.data[f];j.push({assignees:h.assignees,date_created:h.project.date_created,date_updated:h.project.date_updated,description:h.project.description,estimated_person:h.project.estimated_person,id:h.project.id,planned_delivery_date:h.project.planned_delivery_date,planned_hours:h.project.planned_hours,planned_value:h.project.planned_value,pm:h.project.pm,remaining_hours:h.project.remaining_hours,start_date:h.project.start_date,status:h.project.status,sub_task:h.project.sub_task,task_delivery_order:h.project.task_delivery_order,task_title:h.project.task_title,work_package_index:h.project.work_package_index,work_package_number:h.project.work_package_number})}console.log("111",j),console.log("temp",t),console.log("tableData",r),T(r),i(t),function(e){for(var t=[],a=0;a<e.length;a++)t.push({data:e[a],label:e[a].project.task_delivery_order.title,value:e[a].project.task_delivery_order.id});t.unshift({label:"Select All",value:"all",data:{}}),console.log("list",c()(t,"value")),H(c()(t,"value")),v(c()(t,"value"));for(var r=[],s=0;s<e.length;s++){var n=e[s].allassignees;r.push({data:e[s],name:e[s].project.sub_task,tdo:e[s].project.task_delivery_order.title,id:e[s].project.task_delivery_order.id,startDate:e[s].project.date_created,endDate:e[s].project.planned_delivery_date,allassignees:e[s].allassignees,everyone:[],total:Number(e[s].assignees.length),assignees:e[s].assignees,wbs:e[s].project.wbs_list.length,nowbspeople:[],taskTitle:e[s].project.task_title});for(var o=0;o<n.length;o++){var l=n[o].assignee.first_name+" "+n[o].assignee.last_name;r[s].everyone.push(l)}for(var i=e[s].assignees,d=0;d<i.length;d++){var p=i[d].assignee.first_name+" "+i[d].assignee.last_name+",";r[s].nowbspeople.push(p)}}console.log("info array",r),m(r),X(r);for(var _=[],u=0;u<e.length;u++)e[u].allassignees,_.push({assignees:e[u].allassignees,date_created:e[u].project.date_created,date_updated:e[u].project.date_updated,description:e[u].project.description,estimated_person:e[u].project.estimated_person,id:e[u].project.id,planned_delivery_date:e[u].project.planned_delivery_date,planned_hours:e[u].project.planned_hours,planned_value:e[u].project.planned_value,pm:e[u].project.pm,remaining_hours:e[u].project.remaining_hours,start_date:e[u].project.start_date,status:e[u].project.status,sub_task:e[u].project.sub_task,task_delivery_order:e[u].project.task_delivery_order,task_title:e[u].project.task_title,work_package_index:e[u].project.work_package_index,work_package_number:e[u].project.work_package_number});O(_),console.log("wbsinfoarray",_)}(t)}))}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(l.K,{children:[Object(u.jsx)(l.k,{lg:"9",children:Object(u.jsxs)("h3",{className:"timecards-page-header mb-3",children:["Not Created WBS Details (",V.length,")"," "]})}),Object(u.jsx)(l.k,{lg:"3",className:"mb-3 pl-4",children:Object(u.jsx)(o.a,{className:"custom-forminput-6",placeholder:"Filter by TDOs",searchable:!0,options:G,isMulti:!0,onChange:function(e,t){console.log("select ",e,"action ",t),"select-option"==t.action?e.find((function(e){return"all"==e.value}))?(Y(f.filter((function(e){return"all"!=e.value}))),F(f.filter((function(e){return"all"!=e.value}))),console.log("value",e)):(F(e),console.log("value",e),Y(e)):"clear"==t.action?(F([]),Y(f.filter((function(e){return"all"!=e.value})))):"remove-value"==t.action&&(F(e),0==e.length?Y(f.filter((function(e){return"all"!=e.value}))):Y(e))},value:z})}),Object(u.jsx)(l.k,{className:"mt-5 mb-3",children:Object(u.jsx)(l.m,{items:D,primary:!0,hover:!0,sorter:!0,striped:!0,bordered:!0,size:"sm",itemsPerPage:10,pagination:!0,fields:[{key:"TDO",_style:{width:"10%"},_classes:"font-weight-bold"},"Sub Task","Task Title","Planned Delivery Date",{key:"Assignees",_style:{width:"20%"}},{key:"Assignees with no WBS",_style:{width:"20%"}},{key:"Action",_style:{width:"5%"}}],scopedSlots:{Action:function(e){return Object(u.jsx)("td",{children:Object(u.jsx)(l.b,{children:Object(u.jsx)(l.f,{type:"button",className:"create-wbs-from-modal float-right",size:"sm",onClick:function(){!function(e){console.log("item",e);for(var t=[],a=0;a<B.length;a++)if(B[a].project.id==e.id){console.log("match",B[a]);var r=B[a];t.push({assignees:r.assignees,date_created:r.project.date_created,date_updated:r.project.date_updated,description:r.project.description,estimated_person:r.project.estimated_person,id:r.project.id,planned_delivery_date:r.project.planned_delivery_date,planned_hours:r.project.planned_hours,planned_value:r.project.planned_value,pm:r.project.pm,remaining_hours:r.project.remaining_hours,start_date:r.project.start_date,status:r.project.status,sub_task:r.project.sub_task,task_delivery_order:r.project.task_delivery_order,task_title:r.project.task_title,work_package_index:r.project.work_package_index,work_package_number:r.project.work_package_number})}W.push({pathname:"/dashboard/WBS/create-wbs",state:{task:t[0]}})}(e)},children:"Create WBS"})})})}}})})]})})}},1119:function(e,t,a){},552:function(e,t,a){var r=a(164),s=a(581),n=a(586),o=a(165),l=a(587),i=a(161);e.exports=function(e,t,a){var c=-1,d=s,p=e.length,_=!0,u=[],g=u;if(a)_=!1,d=n;else if(p>=200){var j=t?null:l(e);if(j)return i(j);_=!1,d=o,g=new r}else g=t?[]:u;e:for(;++c<p;){var f=e[c],v=t?t(f):f;if(f=a||0!==f?f:0,_&&v===v){for(var h=g.length;h--;)if(g[h]===v)continue e;t&&g.push(v),u.push(f)}else d(g,v,a)||(g!==u&&g.push(v),u.push(f))}return u}},580:function(e,t,a){var r=a(163),s=a(552);e.exports=function(e,t){return e&&e.length?s(e,r(t,2)):[]}},581:function(e,t,a){var r=a(582);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},582:function(e,t,a){var r=a(583),s=a(584),n=a(585);e.exports=function(e,t,a){return t===t?n(e,t,a):r(e,s,a)}},583:function(e,t){e.exports=function(e,t,a,r){for(var s=e.length,n=a+(r?1:-1);r?n--:++n<s;)if(t(e[n],n,e))return n;return-1}},584:function(e,t){e.exports=function(e){return e!==e}},585:function(e,t){e.exports=function(e,t,a){for(var r=a-1,s=e.length;++r<s;)if(e[r]===t)return r;return-1}},586:function(e,t){e.exports=function(e,t,a){for(var r=-1,s=null==e?0:e.length;++r<s;)if(a(t,e[r]))return!0;return!1}},587:function(e,t,a){var r=a(166),s=a(588),n=a(161),o=r&&1/n(new r([,-0]))[1]==1/0?function(e){return new r(e)}:s;e.exports=o},588:function(e,t){e.exports=function(){}}}]);
//# sourceMappingURL=29.ceded5cc.chunk.js.map