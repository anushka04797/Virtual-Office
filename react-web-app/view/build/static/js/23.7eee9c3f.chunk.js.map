{"version":3,"sources":["pages/WBS-create/createWBS.js"],"names":["CreateNewWBS","projects","useSelector","state","data","assigneeList","assignee","dispatch","useDispatch","React","useEffect","fetchProjectsThunk","useState","selectedProject","setSelectedProject","selectedProjectEndDate","setSelectedProjectEndDate","wbsTile","setWbsTitle","wbsDetails","setWbsDetails","wbsStartDate","setWbsStartDate","wbsEndDate","setWbsEndDate","wbsAssignees","setWbsAssignees","className","onSubmit","wbsDataSet","id","work_package_number","target","value","forEach","element","response","fetchWbsThunk","console","log","options","getOptionLabel","option","task_delivery_order","sub_task","getOptionValue","onChange","fetchProjectsAssigneeThunk","planned_delivery_date","color","planned_hours","remaining_hours","type","max","isMulti","first_name","last_name"],"mappings":"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","file":"static/js/23.7eee9c3f.chunk.js","sourcesContent":["import { CContainer, CRow, CCol, CCard, CCardHeader, CCardBody, CForm, CLabel, CInput, CButton, CSelect, CTextarea, CAlert } from '@coreui/react';\r\nimport React, {useState} from 'react'\r\nimport './createWBS.css'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { fetchProjectsThunk, fetchProjectsAssigneeThunk, fetchWbsThunk } from '../../store/slices/ProjectsSlice';\r\nimport Select from \"react-select\";\r\n\r\nconst CreateNewWBS = () => {\r\n    const projects = useSelector(state => state.projects.data)\r\n    const assigneeList = useSelector(state=>state.projects.assignee)\r\n    const dispatch = useDispatch()\r\n    React.useEffect(() => {\r\n        dispatch(fetchProjectsThunk(5))\r\n    }, [])\r\n\r\n    const getAssigneeList = (option)=> {\r\n        dispatch(fetchProjectsAssigneeThunk(option.work_package_number))\r\n        console.log(\"assigneeList\", assigneeList)\r\n        setSelectedProject(option)\r\n        setSelectedProjectEndDate(option.planned_delivery_date)\r\n    }\r\n\r\n    const [selectedProject, setSelectedProject] = useState(null)\r\n    const [selectedProjectEndDate, setSelectedProjectEndDate] = useState(null)\r\n    const [wbsTile, setWbsTitle] = useState(null)\r\n    const [wbsDetails, setWbsDetails] = useState(null)\r\n    const [wbsStartDate, setWbsStartDate] = useState(null)\r\n    const [wbsEndDate, setWbsEndDate] = useState(null)\r\n    const [wbsAssignees, setWbsAssignees] = useState(null)\r\n\r\n    const createWbs = ()=> {\r\n        const wbsDataSet = {\r\n            \"project\": selectedProject.id,\r\n            \"work_package_number\": selectedProject.work_package_number,\r\n            \"assignee\": null,\r\n            \"reporter\": \"5\",\r\n            \"title\": wbsTile.target.value,\r\n            \"description\": wbsDetails.target.value,\r\n            \"start_date\": wbsStartDate.target.value,\r\n            \"end_date\": wbsEndDate.target.value,\r\n            \"hours_worked\": \"0\",\r\n            \"status\": \"1\",\r\n            \"progress\": \"0\",\r\n            \"comments\": \"\",\r\n            \"deliverable\": \"\"\r\n        }\r\n        wbsAssignees.forEach(element => {\r\n            wbsDataSet.assignee = element.id;\r\n            const response = dispatch(fetchWbsThunk(wbsDataSet))\r\n            console.log(\"Create WBS:\", response)\r\n        });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CContainer>\r\n                <CRow>\r\n                    <div className=\"col-md-8 offset-md-2 col-sm-12\">\r\n                        <CCard className=\"custom-wbs-card-1\">\r\n                            <CCardHeader className=\"project-wbs-1\"> <h4 className=\"section-name-wbscreate\">Create a WBS</h4>\r\n                            </CCardHeader>\r\n                            <CCardBody>\r\n                                <CContainer>\r\n                                    <CForm onSubmit={createWbs}>\r\n                                        <CRow>\r\n                                            {/**project name */}\r\n                                            <div className=\"col-lg-12 mb-3\">\r\n                                                <CLabel className=\"custom-label-wbs5\">\r\n                                                    Select Project\r\n                                                </CLabel>\r\n                                                <Select\r\n                                                    options={projects}\r\n                                                    getOptionLabel={option => option.task_delivery_order + \" / \" + option.sub_task}\r\n                                                    getOptionValue={option => option.id}\r\n                                                    onChange={getAssigneeList}\r\n                                                />\r\n                                            </div>\r\n                                            {selectedProject != null ? \r\n                                                <div className=\"col-lg-12 mb-3\">\r\n                                                    <CAlert color=\"primary\">\r\n                                                        <small>\r\n                                                            <b>Planned Delivery Date: </b> {selectedProject.planned_delivery_date}\r\n                                                            <br/>\r\n                                                            <b>Planned Hours: </b> {selectedProject.planned_hours}\r\n                                                            <br/>\r\n                                                            <b>Remaining Hours: </b> {selectedProject.remaining_hours}\r\n                                                        </small>\r\n                                                    </CAlert>\r\n                                                </div> :\r\n                                                <></>\r\n                                            }\r\n                                            {/**wbs title */}\r\n                                            <div className=\"col-lg-12 mb-3\">\r\n                                                <CLabel className=\"custom-label-wbs5\">\r\n                                                    Title\r\n                                                </CLabel>\r\n                                                <CInput className=\"custom-forminput-5\" onChange={setWbsTitle}></CInput>\r\n                                            </div>\r\n                                            {/**WBS description */}\r\n                                            <div className=\"col-lg-12 mb-3\">\r\n                                                <CLabel className=\"custom-label-wbs5\">\r\n                                                    Description\r\n                                                </CLabel>\r\n                                                <CTextarea className=\"custom-forminput-5\" onChange={setWbsDetails}></CTextarea>\r\n                                            </div>\r\n                                            {/**Start date */}\r\n                                            <div className=\"col-lg-6 mb-3\">\r\n                                                <CLabel className=\"custom-label-wbs5\">\r\n                                                    Start date\r\n                                                </CLabel>\r\n                                                <CInput type=\"date\" className=\"custom-forminput-5\" onChange={setWbsStartDate}></CInput>\r\n                                            </div>\r\n                                            {/**End date */}\r\n                                            <div className=\"col-lg-6 mb-3\">\r\n                                                <CLabel className=\"custom-label-wbs5\">\r\n                                                    End date\r\n                                                </CLabel>\r\n                                                <CInput max={selectedProjectEndDate} type=\"date\" className=\"custom-forminput-5\" onChange={setWbsEndDate}></CInput>\r\n                                            </div>\r\n                                            {/**Assignees */}\r\n                                            <div className=\"col-lg-12 mb-3\">\r\n                                                <CLabel className=\"custom-label-wbs5\">\r\n                                                    Assignee(s)\r\n                                                </CLabel>\r\n                                                <Select className=\"custom-forminput-5\" \r\n                                                    options={assigneeList}\r\n                                                    isMulti\r\n                                                    getOptionLabel={option => option.first_name + \" \" + option.last_name}\r\n                                                    getOptionValue={option => option.id}\r\n                                                    onChange={setWbsAssignees}\r\n                                                />\r\n                                            </div>\r\n                                            {/**submit buttons */}\r\n                                            <div className=\"col-md-12\">\r\n                                                <div className=\"projectwbs-form-button-holders mt-3\">\r\n                                                    <CButton type=\"submit\" className=\"create-btn-prjctwbs create-wbs\">Create WBS</CButton>\r\n                                                    <CButton className=\"create-btn-prjctwbs cancel-wbs\">Cancel</CButton>\r\n                                                </div>\r\n                                            </div>\r\n                                        </CRow>\r\n                                    </CForm>\r\n                                </CContainer>\r\n                            </CCardBody>\r\n                        </CCard>\r\n                    </div>\r\n                </CRow>\r\n            </CContainer>\r\n        </>\r\n    )\r\n}\r\nexport default CreateNewWBS;"],"sourceRoot":""}