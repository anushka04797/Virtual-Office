{"version":3,"sources":["pages/completed-project-details-view/CompletedProjectDetails.js"],"names":["CompletedDetailsView","work_package_number","useParams","useLocation","useState","project","setProject","history","useDispatch","useHistory","useEffect","API","get","then","res","statusText","push","data","console","log","fileName","xlData","undefined","className","onClick","i","item","subtasks","sub_task","assigneNames","Array","from","assignees","map","el","assignee","first_name","last_name","assigneName","join","task_delivery_order","title","work_package_index","pm","task_title","estimated_person","planned_value","planned_hours","planned_delivery_date","length","wb","Sheets","XLSX","json_to_sheet","SheetNames","excelBuffer","bookType","type","Blob","FileSaver","exportToCSV","name","disabled","size","color","fontSize","subtask","idx","remaining_hours"],"mappings":"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","file":"static/js/32.21c57767.chunk.js","sourcesContent":["import { CCardBody, CCard, CButton, CBadge, CContainer } from \"@coreui/react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport GradeIcon from \"@material-ui/icons/Grade\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport \"../ongoing-project-details-view/OngoingProjectDetailsView.css\";\r\nimport CIcon from \"@coreui/icons-react\";\r\nimport { useHistory, useLocation } from \"react-router\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useDispatch } from 'react-redux'\r\nimport { API, BASE_URL, USER_ID } from '../../Config';\r\nimport * as FileSaver from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\nconst CompletedDetailsView = () => {\r\n  const { work_package_number } = useParams();\r\n  const location = useLocation();\r\n\r\n  const [project, setProject] = useState();\r\n  const dispatch = useDispatch()\r\n  let history = useHistory();\r\n\r\n\r\n \r\n  // console.log('project from completed page', project)\r\n\r\n  useEffect(() => {\r\n    API.get(\"project/details/\"+ work_package_number +\"/\").then((res) => {\r\n      if(res.statusText != 'OK'){\r\n        history.push('/dashboard/Projects/completed-projects')\r\n    }\r\n    else{\r\n      setProject(res.data.data);\r\n    }\r\n    \r\n  \r\n  \r\n    });\r\n    console.log('project from completed page', project)\r\n  }, [project])\r\n   {/**export in excel */ }\r\n   const fileType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\n   const fileExtension = '.xlsx';\r\n   var fileName;\r\n   const xlData = [];\r\n  const exportToCSV = () => {\r\n      for (let i = 0; i < project.subtasks.length; i++) {\r\n\r\n\r\n          const item = project.subtasks[i];\r\n          fileName='Details of'+' '+item.sub_task;\r\n       \r\n          let assigneNames = [];\r\n          var assigneName;\r\n          Array.from(item.assignees).map((el) => {\r\n              assigneNames.push(el.assignee.first_name + ' ' + el.assignee.last_name)\r\n          })\r\n          assigneName = assigneNames.join(\",\");\r\n\r\n          xlData.push({'Sl. No': i+1,'TDO':item.task_delivery_order.title,'Project Name':item.sub_task,'Work Package Number':item.work_package_number,'Work Package Index':item.work_package_index,'Project Manager':item.pm.first_name+''+item.pm.last_name,'Task Title':item.task_title,'Estimated Persons':item.estimated_person,'Planned Value':project.project.planned_value,'Planned Hours':project.project.planned_hours,'Planned Delivery Date':project.project.planned_delivery_date,'Assignee(s)':assigneName})\r\n         \r\n      }\r\n      const ws = XLSX.utils.json_to_sheet(xlData);\r\n      const wb = { Sheets: { 'data': ws }, SheetNames: ['data'] };\r\n      const excelBuffer = XLSX.write(wb, { bookType: 'xlsx', type: 'array' });\r\n      const data = new Blob([excelBuffer], { type: fileType });\r\n      FileSaver.saveAs(data, fileName + fileExtension);\r\n  }\r\n  return (\r\n    <>\r\n      {project != undefined &&\r\n        <CContainer>\r\n          <h3 className=\"dash-header-1\">Project Details <CButton className=\"export-project-list\" onClick={() => exportToCSV()}><CIcon name=\"cil-spreadsheet\" className=\"mr-2\"/>Export to excel</CButton></h3>\r\n          <div className=\"card-header-portion-ongoing\">\r\n            <h4 className=\"ongoing-card-header-1\">\r\n              <IconButton\r\n                aria-label=\"favourite\"\r\n                disabled\r\n                size=\"medium\"\r\n                color=\"primary\"\r\n              >\r\n                <GradeIcon fontSize=\"inherit\" className=\"fav-button\" />\r\n              </IconButton>\r\n              {project.project.task_delivery_order.title}\r\n            </h4>\r\n          </div>\r\n          {/**card show */}\r\n          <hr className=\"header-underline1\" />\r\n          {/**Details card */}\r\n          <div className=\"row\">\r\n            <div className=\"col-md-11 col-sm-12 col-xs-12 mt-1 mb-2\">\r\n            {Array.from(project.subtasks).map((subtask, idx) => (\r\n              <CCard className=\"card-ongoing-project\" key={idx}>\r\n                <CCardBody className=\"details-project-body\">\r\n                  {/*task percentage portion */}\r\n                  <div className=\"ongoing-initial-info row\">\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">Sub Task Name</h6>\r\n                      <h6 className=\"project-point-details\">{project.project.sub_task}</h6>\r\n                    </div>\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">PM Name</h6>\r\n                      <h6 className=\"project-point-details\">{project.project.pm.first_name + ' ' + project.project.pm.last_name} </h6>\r\n                    </div>\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">Work Package Number</h6>\r\n                      <h6 className=\"project-point-details\">{project.project.work_package_number}</h6>\r\n                    </div>\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">Work Package Index</h6>\r\n                      <h6 className=\"project-point-details\">{project.project.work_package_index}</h6>\r\n                    </div>\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">Task Title</h6>\r\n                      <h6 className=\"project-point-details\">\r\n                      {subtask.task_title}\r\n                      </h6>\r\n                    </div>\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">Estimated Person(s)</h6>\r\n                      <h6 className=\"project-point-details\">\r\n                      {subtask.estimated_person}\r\n                      </h6>\r\n                    </div>\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">Planned Value</h6>\r\n                      <h6 className=\"project-point-details\">{project.project.planned_value} </h6>\r\n                    </div>\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">Planned Hours</h6>\r\n                      <h6 className=\"project-point-details\">{project.project.planned_hours}</h6>\r\n                    </div>\r\n                    <div className=\"tasks-done-2 col-lg-4\">\r\n                      <h6 className=\"tiny-header2\">Remaining Hours</h6>\r\n                      <h6 className=\"project-point-details\">{project.project.remaining_hours}</h6>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/**assignees */}\r\n                  <div className=\"col-md-12 mt-4 mb-2\">\r\n                    <h5 className=\"projectName mb-3\">Asssignee(s)-({Array.from(project.assignees).length})</h5>\r\n                    <div className=\"file-show-ongoing-details row\">\r\n                      {project != undefined && Array.from(project.assignees).map((item, idx) => (\r\n                        <div className=\"col-md-6 col-sm-6 col-lg-2\" key={idx}>\r\n                          <div className=\"file-attached-ongoing rounded-pill\">\r\n                            {item.first_name + ' ' + item.last_name}\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                </CCardBody>\r\n              </CCard>\r\n            ))}\r\n            </div>\r\n          </div>\r\n        </CContainer>}\r\n    </>\r\n  );\r\n};\r\nexport default CompletedDetailsView;\r\n"],"sourceRoot":""}