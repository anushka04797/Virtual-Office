{"version":3,"sources":["pages/sign-in/signIn.js"],"names":["SignIn","history","useHistory","location","useLocation","useSnackbar","enqueueSnackbar","formLogin","closeSnackbar","useFormik","initialValues","email","password","validateOnChange","validateOnBlur","validate","values","console","log","errors","onSubmit","PUBLIC_API","post","then","res","status","data","success","localStorage","setItem","TOKEN","token","group","USER_ID","user_id","push","pathname","state","from","catch","err","response","variant","useEffect","registration","getItem","to","className","htmlFor","type","id","name","value","onChange","handleChange","required","label","e","target","onClick","handleSubmit","disabled","isValid","src","alt"],"mappings":"yIAAA,mFA6JeA,UA7IA,WACb,IAAIC,EAAUC,cACVC,EAAWC,cAUf,EAA2CC,cAAnCC,EAAR,EAAQA,gBAiBFC,GAjBN,EAAyBC,cAiBPC,YAAU,CAC1BC,cAAc,CACZC,MAAM,GACNC,SAAS,IAEXC,kBAAiB,EACjBC,gBAAe,EACfC,SAjCwB,SAACC,GACzBC,QAAQC,IAAIF,GACZ,IAAMG,EAAS,GAKf,OAJKH,EAAOL,QAAOQ,EAAOR,MAAQ,sBAC7BK,EAAOJ,WAAUO,EAAOP,SAAW,yBAExCK,QAAQC,IAAIC,GACLA,GA2BPC,SAxBU,WAEVC,IAAWC,KAAK,cAAcf,EAAUS,QAAQO,MAAK,SAACC,GACnC,KAAdA,EAAIC,QAAqC,QAApBD,EAAIE,KAAKC,UAC/BC,aAAaC,QAAQC,IAAMN,EAAIE,KAAKK,OACpCH,aAAaC,QAAQ,SAASL,EAAIE,KAAKM,OACvCJ,aAAaC,QAAQI,IAAQT,EAAIE,KAAKQ,SACtCjC,EAAQkC,KAAK,CAACC,SAAS,aAAaC,MAAM,CAACC,KAAK,eAEjDC,OAAM,SAAAC,GACPvB,QAAQC,IAAIsB,EAAIC,UACU,KAAvBD,EAAIC,SAAShB,QACdnB,EAAgB,iCAAiC,CAACoC,QAAQ,mBAoBhE,OALAC,qBAAU,WAAK,IAAD,GACZ,UAAGxC,EAASkC,aAAZ,aAAG,EAAgBO,eACjBtC,EAAgB,uDAAwD,CAAEoC,QAAS,WAErF,IAEA,mCACGd,aAAaiB,QAAQf,KAAO,cAAC,IAAD,CAAUgB,GAAG,eAAe,qBAAKC,UAAU,iBAAf,SACvD,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,MAAf,UAEE,qBAAKA,UAAU,oBAAf,SACE,qBAAKA,UAAU,6BAAf,SACE,sBAAKA,UAAU,WAAf,UACE,oBAAIA,UAAU,cAAd,qBACA,sBAAKA,UAAU,cAAf,UACE,eAAC,IAAD,CAAOA,UAAU,cAAjB,UACE,sBAAKA,UAAU,OAAf,UACE,cAAC,IAAD,CACEC,QAAQ,qBACRD,UAAU,sBAFZ,mBAMA,cAAC,IAAD,CACEE,KAAK,QACLC,GAAG,QACHC,KAAK,QACLC,MAAO7C,EAAUS,OAAOL,MACxB0C,SAAU9C,EAAU+C,aACpB,mBAAiB,YACjBP,UAAU,0BACVQ,UAAQ,OAMZ,sBAAKR,UAAU,OAAf,UACE,cAAC,IAAD,CACEC,QAAQ,wBACRD,UAAU,sBAFZ,sBAMA,cAAC,IAAD,CACEE,KAAK,WACLC,GAAG,WACHC,KAAK,WACLC,MAAO7C,EAAUS,OAAOJ,SACxByC,SAAU9C,EAAU+C,aACpBP,UAAU,+BAId,sBAAKA,UAAU,YAAf,UACE,sBAAKA,UAAU,MAAf,UAEE,cAAC,IAAD,CACEA,UAAU,oBACVS,MAAM,cACNN,GAAG,WACHG,SAAU,SAACI,GACTxC,QAAQC,IAAIuC,EAAEC,WAGlB,cAAC,IAAD,CAAQV,QAAQ,WAAWD,UAAU,qBAArC,4BAGF,qBAAKA,UAAU,SAAf,SACE,cAAC,IAAD,CAAMA,UAAU,cAAcD,GAAG,mBAAjC,kCAGJ,qBAAKC,UAAU,gBAAf,SACE,cAAC,IAAD,CAASE,KAAK,SAASU,QAASpD,EAAUqD,aAAcb,UAAU,uBAAuBc,UAAWtD,EAAUuD,QAA9G,0BAMJ,qBAAKf,UAAU,YAAf,SACE,qBAAIA,UAAU,iBAAd,UAA+B,sBAAMA,UAAU,aAAhB,oCAA0D,cAAC,IAAD,CAAMA,UAAU,sBAAsBD,GAAG,YAAzC,qCAOnG,qBAAKC,UAAU,mCAAf,SACE,qBACEgB,IAAK,6BACLC,IAAI,QACJjB,UAAU","file":"static/js/27.896af71d.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./signIn.css\";\r\nimport {\r\n  CForm,\r\n  CInputGroup,\r\n  CLabel,\r\n  CInput,\r\n  CFormText,\r\n CInputCheckbox,\r\n  CButton,\r\n} from \"@coreui/react\";\r\nimport { Link,Redirect,useHistory } from \"react-router-dom\";\r\nimport { PUBLIC_API, TOKEN, USER_ID } from \"../../Config\";\r\nimport { useFormik } from \"formik\";\r\nimport { useLocation } from \"react-router\";\r\nimport { useSnackbar } from \"notistack\";\r\nconst SignIn = () => {\r\n  let history = useHistory();\r\n  let location = useLocation()\r\n  const validate_login_form=(values)=>{\r\n    console.log(values);\r\n    const errors = {};\r\n    if (!values.email) errors.email = \"Email is required!\"\r\n    if (!values.password) errors.password = \"Password is required!\"\r\n    //if (!values.country_id) errors.country_id = \"Country is required!\"\r\n    console.log(errors);\r\n    return errors;\r\n  }\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n  const login=()=>{\r\n    \r\n    PUBLIC_API.post('auth/login/',formLogin.values).then((res)=>{\r\n      if(res.status == 200 && res.data.success == 'True'){\r\n        localStorage.setItem(TOKEN,res.data.token)\r\n        localStorage.setItem('groups',res.data.group)\r\n        localStorage.setItem(USER_ID,res.data.user_id)\r\n        history.push({pathname:'/dashboard',state:{from:'login'}})\r\n      }\r\n    }).catch(err=>{\r\n      console.log(err.response)\r\n      if(err.response.status == 403){\r\n        enqueueSnackbar('Your account is not active yet',{variant:\"warning\"})\r\n      }\r\n    })\r\n  }\r\n  const formLogin = useFormik({\r\n    initialValues:{\r\n      email:'',\r\n      password:''\r\n    },\r\n    validateOnChange:true,\r\n    validateOnBlur:true,\r\n    validate: validate_login_form,\r\n    onSubmit: login\r\n  })\r\n  \r\n  useEffect(()=>{\r\n    if(location.state?.registration){\r\n      enqueueSnackbar('Registration Succefull, Please verify email to login', { variant: 'info' })\r\n    }\r\n  },[])\r\n  return (\r\n    <>\r\n      {localStorage.getItem(TOKEN)?<Redirect to=\"/dashboard\"/>:<div className=\"signin-content\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            {/**Form section */}\r\n            <div className=\"col-lg-6 contents\">\r\n              <div className=\"row justify-content-center\">\r\n                <div className=\"col-md-8\">\r\n                  <h3 className=\"form-header\">Sign in</h3>\r\n                  <div className=\"form-holder\">\r\n                    <CForm className=\"custom-form\">\r\n                      <div className=\"mb-3\">\r\n                        <CLabel\r\n                          htmlFor=\"exampleInputEmail1\"\r\n                          className=\"custom-label-signin\"\r\n                        >\r\n                          Email\r\n                        </CLabel>\r\n                        <CInput\r\n                          type=\"email\"\r\n                          id=\"email\"\r\n                          name=\"email\"\r\n                          value={formLogin.values.email}\r\n                          onChange={formLogin.handleChange}\r\n                          aria-describedby=\"emailHelp\"\r\n                          className=\"custom-formgroup-signin\"\r\n                          required\r\n                        />\r\n                        {/* <CFormText id=\"emailHelp\">\r\n      We'll never share your email with anyone else.\r\n    </CFormText> */}\r\n                      </div>\r\n                      <div className=\"mb-3\">\r\n                        <CLabel\r\n                          htmlFor=\"exampleInputPassword1\"\r\n                          className=\"custom-label-signin\"\r\n                        >\r\n                          Password\r\n                        </CLabel>\r\n                        <CInput\r\n                          type=\"password\"\r\n                          id=\"password\"\r\n                          name=\"password\"\r\n                          value={formLogin.values.password}\r\n                          onChange={formLogin.handleChange}\r\n                          className=\"custom-formgroup-signin\"\r\n                          \r\n                        />\r\n                      </div>\r\n                      <div className=\"show-flex\">\r\n                        <div className=\"rem\">\r\n                          \r\n                          <CInputCheckbox\r\n                            className=\"mb-3 custom-check\"\r\n                            label=\"Remember Me\"\r\n                            id=\"remember\"\r\n                            onChange={(e) => {\r\n                              console.log(e.target);\r\n                            }}\r\n                          />\r\n                          <CLabel htmlFor=\"remember\" className=\"custom-check-label\">Remember me</CLabel>\r\n                        </div>\r\n\r\n                        <div className=\"forgot\">\r\n                          <Link className=\"forgot-link\" to=\"/forgot-password\">Forgot Password</Link>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"submit-holder\">\r\n                        <CButton type=\"button\" onClick={formLogin.handleSubmit} className=\"submit-button-signin\" disabled={!formLogin.isValid}>\r\n                          Sign in\r\n                        </CButton>\r\n                      </div>\r\n                    </CForm>\r\n                    {/**Go to register */}\r\n                    <div className=\"mb-4 mt-3\">\r\n                      <h5 className=\"final-footer-1\"><span className=\"dum-text-1\">Don't have an account?</span><Link className=\"registration-link-1\" to=\"/register\">Register</Link></h5>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/**Background imahge section */}\r\n            <div className=\"col-lg-6 no-mob-display-sign-img\">\r\n              <img\r\n                src={\"assets/bgs/sign-in-img.svg\"}\r\n                alt=\"Image\"\r\n                className=\"img-fluid img-bg\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>}\r\n    </>\r\n  );\r\n};\r\nexport default SignIn;\r\n"],"sourceRoot":""}