(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[32],{549:function(e,t,a){"use strict";var r=a(500),n=a(18),s=a(7),o=a(0),c=a(25),i=a(479),l=a(50),d=a(477),u=a(39),b=a(52),j=a(36),m=a(48),f=a(306),v=a(480);function g(e){return Object(f.a)("MuiLinearProgress",e)}Object(v.a)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var h,p,O,_,x,k,w,y,S,C,N,I,P=a(3),q=["className","color","value","valueBuffer","variant"],B=Object(l.e)(w||(w=h||(h=Object(r.a)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),V=Object(l.e)(y||(y=p||(p=Object(r.a)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),z=Object(l.e)(S||(S=O||(O=Object(r.a)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),D=function(e,t){return"inherit"===t?"currentColor":"light"===e.palette.mode?Object(d.e)(e.palette[t].main,.62):Object(d.b)(e.palette[t].main,.5)},E=Object(j.a)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,t["color".concat(Object(u.a)(a.color))],t[a.variant]]}})((function(e){var t=e.ownerState,a=e.theme;return Object(s.a)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:D(a,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})})),R=Object(j.a)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:function(e,t){var a=e.ownerState;return[t.dashed,t["dashedColor".concat(Object(u.a)(a.color))]]}})((function(e){var t=e.ownerState,a=e.theme,r=D(a,t.color);return Object(s.a)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),Object(l.c)(C||(C=_||(_=Object(r.a)(["\n    animation: "," 3s infinite linear;\n  "]))),z)),M=Object(j.a)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:function(e,t){var a=e.ownerState;return[t.bar,t["barColor".concat(Object(u.a)(a.color))],("indeterminate"===a.variant||"query"===a.variant)&&t.bar1Indeterminate,"determinate"===a.variant&&t.bar1Determinate,"buffer"===a.variant&&t.bar1Buffer]}})((function(e){var t=e.ownerState,a=e.theme;return Object(s.a)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":a.palette[t.color].main},"determinate"===t.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===t.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(function(e){var t=e.ownerState;return("indeterminate"===t.variant||"query"===t.variant)&&Object(l.c)(N||(N=x||(x=Object(r.a)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),B)})),A=Object(j.a)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:function(e,t){var a=e.ownerState;return[t.bar,t["barColor".concat(Object(u.a)(a.color))],("indeterminate"===a.variant||"query"===a.variant)&&t.bar2Indeterminate,"buffer"===a.variant&&t.bar2Buffer]}})((function(e){var t=e.ownerState,a=e.theme;return Object(s.a)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":a.palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:D(a,t.color),transition:"transform .".concat(4,"s linear")})}),(function(e){var t=e.ownerState;return("indeterminate"===t.variant||"query"===t.variant)&&Object(l.c)(I||(I=k||(k=Object(r.a)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),V)})),L=o.forwardRef((function(e,t){var a=Object(m.a)({props:e,name:"MuiLinearProgress"}),r=a.className,o=a.color,l=void 0===o?"primary":o,d=a.value,j=a.valueBuffer,f=a.variant,v=void 0===f?"indeterminate":f,h=Object(n.a)(a,q),p=Object(s.a)({},a,{color:l,variant:v}),O=function(e){var t=e.classes,a=e.variant,r=e.color,n={root:["root","color".concat(Object(u.a)(r)),a],dashed:["dashed","dashedColor".concat(Object(u.a)(r))],bar1:["bar","barColor".concat(Object(u.a)(r)),("indeterminate"===a||"query"===a)&&"bar1Indeterminate","determinate"===a&&"bar1Determinate","buffer"===a&&"bar1Buffer"],bar2:["bar","buffer"!==a&&"barColor".concat(Object(u.a)(r)),"buffer"===a&&"color".concat(Object(u.a)(r)),("indeterminate"===a||"query"===a)&&"bar2Indeterminate","buffer"===a&&"bar2Buffer"]};return Object(i.a)(n,g,t)}(p),_=Object(b.a)(),x={},k={bar1:{},bar2:{}};if("determinate"===v||"buffer"===v)if(void 0!==d){x["aria-valuenow"]=Math.round(d),x["aria-valuemin"]=0,x["aria-valuemax"]=100;var w=d-100;"rtl"===_.direction&&(w=-w),k.bar1.transform="translateX(".concat(w,"%)")}else 0;if("buffer"===v)if(void 0!==j){var y=(j||0)-100;"rtl"===_.direction&&(y=-y),k.bar2.transform="translateX(".concat(y,"%)")}else 0;return Object(P.jsxs)(E,Object(s.a)({className:Object(c.default)(O.root,r),ownerState:p,role:"progressbar"},x,{ref:t},h,{children:["buffer"===v?Object(P.jsx)(R,{className:O.dashed,ownerState:p}):null,Object(P.jsx)(M,{className:O.bar1,ownerState:p,style:k.bar1}),"determinate"===v?null:Object(P.jsx)(A,{className:O.bar2,ownerState:p,style:k.bar2})]}))}));t.a=L},916:function(e,t,a){"use strict";a.r(t);var r=a(19),n=a(33),s=a(492),o=a(0),c=a.n(o),i=(a(917),a(94)),l=a(97),d=a(513),u=a(8),b=a(516),j=a(503),m=a.n(j),f=a(549),v=a(75),g=a.n(v),h=a(504),p=a(11),O=(a(122),a(99)),_=a(3);t.default=function(){var e=Object(i.b)(),t=Object(p.h)(),a=Object(o.useState)([]),j=Object(n.a)(a,2),v=j[0],x=j[1],k=Object(o.useState)([]),w=Object(n.a)(k,2),y=w[0],S=w[1],C=Object(i.c)((function(e){var t=[];return Array.from(e.projects.data).forEach((function(e,a){parseFloat(e.project.remaining_hours)>0&&t.push({value:e.project.id,label:e.project.sub_task,data:e})})),Object(h.d)("projects.add_projects")&&Array.from(e.projects.pm_projects).forEach((function(e,a){parseFloat(e.project.remaining_hours)>0&&(t.find((function(t){return t.label===e.project.sub_task}))||t.push({value:e.project.id,label:e.project.sub_task,data:e}))})),t})),N=function(e){if(console.log("task list###########: ",e),Object(h.d)("projects.add_projects"))S(g()(e,"task_title"));else{var t=[];e.forEach((function(e){e.assignees.forEach((function(a){console.log(a.assignee.id),a.assignee.id==sessionStorage.getItem(u.j)&&t.push(e)}))})),S(g()(t,"task_title"))}},I=Object(o.useRef)(),P=Object(o.useRef)(),q=Object(o.useRef)(),B=Object(o.useState)(null),V=Object(n.a)(B,2),z=V[0],D=V[1],E=Object(o.useState)({}),R=Object(n.a)(E,2),M=R[0],A=R[1],L=Object(o.useState)(""),T=Object(n.a)(L,2),F=T[0],J=T[1],W=Object(o.useState)([]),H=Object(n.a)(W,2),X=H[0],U=H[1],G=function(t){e(Object(l.b)(null===t||void 0===t?void 0:t.work_package_index));var a=[];t.assignees.forEach((function(e){a.push({value:e.assignee.id,label:e.assignee.first_name+" "+e.assignee.last_name,data:e.assignee})})),g()(a,"label"),a.unshift({value:"All",label:"Select All"}),x(a),console.log("array",a),console.log("assignees",t)},K=Object(O.b)(),Q=K.enqueueSnackbar,Y=(K.closeSnackbar,function(){Z.resetForm(),I.current.select.clearValue(),P.current.select.clearValue(),q.current.select.clearValue(),x([])}),Z=Object(b.a)({initialValues:{project:"",work_package_number:"",assignee:[],reporter:sessionStorage.getItem(u.j),title:"",description:"",start_date:"",end_date:"",hours_worked:"0",status:"1",progress:"0",comments:"",deliverable:""},validateOnChange:!0,validateOnBlur:!0,validate:function(e){var t,a,r={};return e.project||(r.project="Project is required"),e.title||(r.title="Title is required"),e.start_date||(r.start_date="Start date is required"),e.end_date||(r.end_date="End date is required"),e.start_date&&(t=e.start_date,a=e.end_date,new Date(a)<new Date(t))&&(r.end_date="End date can not be past from start date"),e.assignee.length<1&&(r.assignee="Assignee is required"),r},onSubmit:function(t,a){var r=a.setSubmitting,n=new Date;new Date(F)-n>=0?(console.log("values",JSON.stringify(Z.values)),u.a.post("wbs/create/",Z.values).then((function(t){console.log(t),200===t.status&&"True"===t.data.success&&(Y(),S([]),e(Object(l.e)(sessionStorage.getItem(u.j))),e(Object(l.d)(sessionStorage.getItem(u.j))),e(Object(l.c)(sessionStorage.getItem(u.j))),m()("Created!","Successfuly Created","success"))})).catch((function(e){console.log(e),r(!1)}))):(Q("Planned Delivery date is over! ",{variant:"warning"}),Y())}});return c.a.useEffect((function(){var e;if(null!==(e=t.state)&&void 0!==e&&e.task){var a=t.state.task;console.log("location data if block",a),function(e){var t=C;console.log("projects",C),t.forEach((function(t,a){t.label==e&&(A(t),N(t.data.subtasks))}))}(a.sub_task),D(a),G(a),U(a),J(a.planned_delivery_date),Z.setValues({project:a.id,work_package_number:a.work_package_number,assignee:Z.values.assignee,reporter:sessionStorage.getItem(u.j),title:Z.values.title,description:Z.values.description,start_date:Z.values.start_date,end_date:Z.values.end_date,hours_worked:Z.values.hours_worked,status:Z.values.status,progress:Z.values.progress,comments:Z.values.comments,deliverable:Z.values.deliverable})}}),[]),Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(s.l,{children:Object(_.jsx)(s.J,{children:Object(_.jsx)("div",{className:"col-md-8 offset-md-2 col-sm-12",children:Object(_.jsxs)(s.g,{className:"custom-wbs-card-1",children:[Object(_.jsxs)(s.j,{className:"project-wbs-1",children:[" ",Object(_.jsx)("h4",{className:"section-name-wbscreate",children:"Create a WBS"})]}),Object(_.jsx)(s.h,{children:Object(_.jsx)(s.l,{children:Object(_.jsx)(s.t,{children:Object(_.jsxs)(s.J,{children:[Object(_.jsxs)("div",{className:"col-lg-12 mb-3",children:[Object(_.jsx)(s.z,{className:"custom-label-wbs5",children:"Select Project"}),Object(_.jsx)(d.a,{id:"project",options:C,value:M,onChange:function(e,t){console.log("action: ".concat(t.action)),console.log("newValue: ",e),"select-option"==t.action?(A(e),N(e.data.subtasks),Z.setValues({project:e.data.project.id,work_package_number:e.data.project.work_package_number,assignee:Z.values.assignee,reporter:sessionStorage.getItem(u.j),title:Z.values.title,description:Z.values.description,start_date:Z.values.start_date,end_date:Z.values.end_date,hours_worked:Z.values.hours_worked,status:Z.values.status,progress:Z.values.progress,comments:Z.values.comments,deliverable:Z.values.deliverable})):"clear"==t.action&&A(null)},ref:I}),Z.touched.project&&Z.errors.project&&Object(_.jsx)("small",{style:{color:"red"},children:Z.errors.project})]}),Object(_.jsxs)("div",{className:"col-lg-12 mb-3",children:[Object(_.jsx)(s.z,{className:"custom-label-wbs5",children:"Task Title"}),Object(_.jsx)(d.a,{id:"task_title",options:y,getOptionLabel:function(e){return e.task_title},getOptionValue:function(e){return e.id},onChange:function(e,t){null!=e&&(G(e),D(e),J(null===e||void 0===e?void 0:e.planned_delivery_date)),"select-option"==t.action&&Z.setValues({project:e.id,work_package_number:Z.values.work_package_number,assignee:Z.values.assignee,reporter:sessionStorage.getItem(u.j),title:Z.values.title,description:Z.values.description,start_date:Z.values.start_date,end_date:Z.values.end_date,hours_worked:Z.values.hours_worked,status:Z.values.status,progress:Z.values.progress,comments:Z.values.comments,deliverable:Z.values.deliverable})},value:z,ref:q}),Z.touched.task_title&&Z.errors.task_title&&Object(_.jsx)("small",{style:{color:"red"},children:Z.errors.task_title})]}),null!=z?Object(_.jsx)("div",{className:"col-lg-12 mb-3",children:Object(_.jsx)(s.a,{color:"primary",children:Object(_.jsxs)("small",{children:[Object(_.jsx)("b",{children:"Planned Delivery Date: "})," ",z.planned_delivery_date,Object(_.jsx)("br",{}),Object(_.jsx)("b",{children:"Planned Hours: "})," ",z.planned_hours,Object(_.jsx)("br",{}),Object(_.jsx)("b",{children:"Remaining Hours: "})," ",z.remaining_hours,Object(_.jsx)("br",{}),Object(_.jsx)("b",{children:"Task details: "})," ",z.description]})})}):Object(_.jsx)(_.Fragment,{}),Object(_.jsxs)("div",{className:"col-lg-12 mb-3",children:[Object(_.jsx)(s.z,{className:"custom-label-wbs5",children:"WBS Title"}),Object(_.jsx)(s.y,{id:"title",name:"title",value:Z.values.title,onChange:Z.handleChange,className:"custom-forminput-6"}),Z.touched.title&&Z.errors.title&&Object(_.jsx)("small",{style:{color:"red"},children:Z.errors.title})]}),Object(_.jsxs)("div",{className:"col-lg-12 mb-3",children:[Object(_.jsx)(s.z,{className:"custom-label-wbs5",children:"Description"}),Object(_.jsx)(s.U,{id:"description",name:"description",value:Z.values.description,onChange:Z.handleChange,className:"custom-forminput-6"})]}),Object(_.jsxs)("div",{className:"col-lg-6 mb-3",children:[Object(_.jsx)(s.z,{className:"custom-label-wbs5",children:"Start date"}),Object(_.jsx)(s.y,{max:F,type:"date",id:"start_date",name:"start_date",value:Z.values.start_date,onChange:Z.handleChange,className:"custom-forminput-6"}),Z.touched.start_date&&Z.errors.start_date&&Object(_.jsx)("small",{style:{color:"red"},children:Z.errors.start_date})]}),Object(_.jsxs)("div",{className:"col-lg-6 mb-3",children:[Object(_.jsx)(s.z,{className:"custom-label-wbs5",children:"End date"}),Object(_.jsx)(s.y,{max:F,type:"date",id:"end_date",name:"end_date",value:Z.values.end_date,onChange:Z.handleChange,className:"custom-forminput-6"}),Z.touched.end_date&&Z.errors.end_date&&Object(_.jsx)("small",{style:{color:"red"},children:Z.errors.end_date})]}),Object(_.jsxs)("div",{className:"col-lg-12 mb-3",children:[Object(_.jsx)(s.z,{className:"custom-label-wbs5",children:"Assignee(s)"}),Object(_.jsx)(d.a,{className:"custom-forminput-6",ref:P,options:v,isMulti:!0,onChange:function(e,t){var a=[],n=[];if("select-option"==t.action)console.log("action",t),U(e),console.log("rats",X),e.forEach((function(e){if("All"==e.value){(n=Object(r.a)(v)).shift(),U(n),console.log("arr",n),console.log("len",n.length);for(var t=0;t<n.length;t++)a[t]=n[t].value;console.log("assinearray",a)}else a.push(e.value)}));else if("remove-value"==t.action){console.log("removed",t.removedValue),n=Object(r.a)(X),console.log("arr",n);for(var s=0;s<n.length;s++)t.removedValue==n[s]&&n.splice(s,1);U(n);for(var o=0;o<n.length;o++)a[o]=n[o].value}console.log("action ",t),"clear"==t.action&&U(null),console.log("after removed ",a),Z.setFieldValue("assignee",a)},value:X}),Z.touched.assignee&&Z.errors.assignee&&Object(_.jsx)("small",{style:{color:"red"},children:Z.errors.assignee})]}),Object(_.jsx)("div",{className:"col-md-12",children:1==!(!Z.isSubmitting||Z.isValidating)?Object(_.jsx)(f.a,{}):Object(_.jsxs)("div",{className:"projectwbs-form-button-holders mt-3",children:[Object(_.jsx)(s.f,{type:"button",onClick:Z.handleSubmit,className:"create-btn-prjctwbs create-wbs",children:"Create WBS"}),Object(_.jsx)(s.f,{type:"button",onClick:Y,className:"create-btn-prjctwbs cancel-wbs",children:"Cancel"})]})})]})})})})]})})})})})}},917:function(e,t,a){}}]);
//# sourceMappingURL=32.9876d5c0.chunk.js.map