(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[28],{1004:function(e,s,a){"use strict";a.r(s);var l=a(33),c=a(489),t=a(484),n=a(506),i=a(0),o=(a(926),a(927),a(567)),r=a(568),d=a(4),m=a(93),j=a(509),u=a(9),b=a(112),h=a(501),p=a.n(h);s.default=function(){var e=Object(i.useState)(!1),s=Object(l.a)(e,2),a=s[0],h=s[1],O=Object(i.useState)(!1),f=Object(l.a)(O,2),x=f[0],v=f[1],w=Object(i.useState)(!1),g=Object(l.a)(w,2),N=g[0],_=g[1],C=Object(m.c)((function(e){return e.profile.data}));console.log(C);var P=Object(i.useState)(""),F=Object(l.a)(P,2),k=F[0],y=F[1],S=Object(i.useRef)(null),B=Object(i.useState)(),A=Object(l.a)(B,2),E=(A[0],A[1]),I=Object(i.useState)(C?u.b+C.profile_pic:"avatars/user-avatar-default.png"),U=Object(l.a)(I,2),H=U[0],R=U[1],V=Object(i.useState)(!1),q=Object(l.a)(V,2),L=q[0],D=q[1],J=Object(m.b)(),T=function(){console.log("values"),D(!L),Y.setValues({first_name:C.first_name,last_name:C.last_name,email:C.email,phone:C.phone,address:C.address,blood_group:C.blood_group})},G=Object(j.a)({initialValues:{old_password:"",new_password:"",new_password_confirm:""},validateOnChange:!0,validateOnBlur:!0,validate:function(e){var s={};return e.old_password||(s.old_password="Old Password Required"),(String(e.new_password).length<8||!e.new_password||e.new_password!=e.new_password_confirm)&&(s.new_password="Invalid New Password"),s},onSubmit:function(e){var s=new FormData;console.log("values",e);for(var a=0,c=Object.entries(G.values);a<c.length;a++){var t=Object(l.a)(c[a],2),n=t[0],i=t[1];"new_password_confirm"!=n&&s.append(n,i)}u.a.put("auth/change/password/",s).then((function(e){console.log(e),200==e.status&&(G.resetForm(),p()("Updated","Your Password has been changed","success"))})).catch((function(e){400==e.response.status&&p()("Incorrect","Bad Request","warning")}))}}),Q=function(e){var s=new FormData;s.append("profile_pic",e),console.log("image",e),u.c.post("auth/change/profile/image/"+sessionStorage.getItem(u.j)+"/",s).then((function(e){201==e.status&&p()("Updated!","Profile Picture Updated","success")})).catch((function(e){400==e.status&&p()("Incorrect","Bad Request","warning")}))};Object(i.useEffect)((function(){window.scrollTo(0,0),y({value:C.blood_group,label:C.blood_group}),R(C.profile_pic?u.b+C.profile_pic:"avatars/user-avatar-default.png")}),[C]);var Y=Object(j.a)({initialValues:{first_name:"",last_name:"",email:"",phone:"",address:"",blood_group:""},validateOnChange:!0,validateOnBlur:!0,validate:function(e){var s={};return e.first_name||(s.first_name="First Name is required"),e.last_name||(s.last_name="Last Name is required"),e.email||(s.email="Email is required"),s},onSubmit:function(e){console.log(e),u.a.post("auth/profile/update/"+sessionStorage.getItem(u.j)+"/",Y.values).then((function(e){console.log(e),201==e.status&&"True"==e.data.success&&(J(Object(b.b)(sessionStorage.getItem(u.j))),D(!1),p()("Updated!","Your Profile has been updated","success"))}))}});function z(e){return void 0!=e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(t.k,{children:[Object(d.jsxs)(t.z,{closeOnBackdrop:!1,alignment:"center",show:L,onClose:T,children:[Object(d.jsx)(t.B,{closeButton:!0,children:Object(d.jsx)(t.C,{className:"modal-title-profile",children:Object(d.jsx)("span",{className:"edit-profile-form-header",children:"Edit Profile Info"})})}),Object(d.jsx)(t.A,{children:Object(d.jsx)(t.k,{children:Object(d.jsx)(t.s,{children:Object(d.jsxs)(t.H,{children:[Object(d.jsxs)("div",{className:"col-md-6 mb-3",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"userFName",children:"First Name"}),Object(d.jsx)(t.w,{type:"text",name:"first_name",id:"first_name",className:"custom-forminput-6",value:Y.values.first_name,onChange:Y.handleChange})]}),Object(d.jsxs)("div",{className:"col-md-6 mb-3",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"userLName",children:"Last Name"}),Object(d.jsx)(t.w,{type:"text",name:"last_name",id:"last_name",className:"custom-forminput-6",value:Y.values.last_name,onChange:Y.handleChange})]}),Object(d.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"uEmail",children:"Email"}),Object(d.jsx)(t.w,{type:"email",name:"email",id:"email",className:"custom-forminput-6",value:Y.values.email,onChange:Y.handleChange,readOnly:!0})]}),Object(d.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"uPhoneNo",children:"Phone"}),Object(d.jsx)(t.w,{type:"tel",name:"phone",id:"phone",value:Y.values.phone,onChange:Y.handleChange,className:"custom-forminput-6"})]}),Object(d.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"Address",children:"Address"}),Object(d.jsx)(t.w,{type:"text",name:"address",id:"address",value:Y.values.address,onChange:Y.handleChange,className:"custom-forminput-6"})]}),Object(d.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"blood_group",children:"Blood Group"}),Object(d.jsx)(n.a,{id:"blood_group",value:k,onChange:function(e){console.log(e),Y.setValues({first_name:Y.values.first_name,last_name:Y.values.last_name,email:Y.values.email,phone:Y.values.phone,address:Y.values.address,blood_group:e.value}),y({value:e.value,label:e.label})},className:"custom-forminput-6",options:[{value:"A+",label:"A+"},{value:"A-",label:"A-"},{value:"B+",label:"B+"},{value:"B-",label:"B-"},{value:"AB+",label:"AB+"},{value:"AB-",label:"AB-"},{value:"O+",label:"O+"},{value:"O-",label:"O-"}]})]}),Object(d.jsx)("div",{className:"col-md-12 ",children:Object(d.jsxs)("div",{className:"project-form-button-holders mt-3",children:[Object(d.jsx)(t.f,{className:"profile-form-btn update-profile",onClick:Y.handleSubmit,type:"button",disabled:!Y.isValid,children:"Update Info"}),Object(d.jsx)(t.f,{className:"profile-form-btn cancel-update",type:"reset",onClick:function(){return D(!L)},children:"Cancel"})]})})]})})})})]}),Object(d.jsxs)(t.R,{activeTab:"viewProfile",children:[Object(d.jsxs)(t.D,{variant:"tabs",className:"tab-style",children:[Object(d.jsx)(t.E,{children:Object(d.jsxs)(t.F,{"data-tab":"viewProfile",className:"special",children:[Object(d.jsx)(c.a,{name:"cil-user"})," View Profile"]})}),Object(d.jsx)(t.E,{children:Object(d.jsxs)(t.F,{"data-tab":"changePassword",className:"special",children:[Object(d.jsx)(c.a,{name:"cil-pen-alt",className:"mr-1"}),"Change Password"]})})]}),Object(d.jsxs)(t.P,{children:[Object(d.jsx)(t.Q,{"data-tab":"viewProfile",children:C&&Object(d.jsxs)(t.k,{children:[Object(d.jsx)("h3",{className:"profile-page-header",children:"Profile Details"}),Object(d.jsx)(t.H,{children:Object(d.jsx)("div",{className:"col-lg-8 offset-lg-2",children:Object(d.jsxs)(t.g,{className:"card-view-profile mt-3",children:[Object(d.jsxs)("div",{className:"user-profile-pic-div text-center",children:[Object(d.jsx)(t.v,{alt:"click to upload image",className:"mx-auto rounded-circle update-img",src:H}),Object(d.jsx)("input",{style:{display:"none"},ref:S,type:"file",onChange:function(e){!function(e){E(e),R(URL.createObjectURL(e)),Q(e)}(e.target.files[0])}}),Object(d.jsxs)(t.f,{onClick:function(){S.current.click()},type:"button",className:"d-block mx-auto change-img-btn mt-1",children:[" ",Object(d.jsx)(c.a,{name:"cil-camera"})," Change Picture"]})]}),Object(d.jsxs)(t.h,{children:[Object(d.jsx)("hr",{}),Object(d.jsxs)(t.f,{className:"edit-profile mb-3",onClick:function(){return T()},children:[Object(d.jsx)(c.a,{name:"cil-pen",className:"mr-1"}),"Edit Info"]}),Object(d.jsxs)("div",{className:"row justify-content-center",children:[Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:"Full Name"}),Object(d.jsxs)("h5",{className:"profile-details-points child",children:[z(C.first_name)+" "+z(C.last_name)," "]})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:" Email"}),Object(d.jsx)("h5",{className:"profile-details-points-email",children:C.email})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:"Job title"}),Object(d.jsx)("h5",{className:"profile-details-points-email",children:null===C||void 0===C?void 0:C.slc_details.slc.name})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:" Phone"}),Object(d.jsxs)("h5",{className:"profile-details-points child",children:["+",C.phone]})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:" Address"}),Object(d.jsx)("h5",{className:"profile-details-points child",children:C.address})]}),Object(d.jsxs)("div",{className:"col-md-6 col-lg-4",children:[Object(d.jsx)("h5",{className:"info-header-1",children:" Blood Group"}),Object(d.jsx)("h5",{className:"profile-details-points child",children:C.blood_group})]})]})]})]})})})]})}),Object(d.jsx)(t.Q,{"data-tab":"changePassword",children:Object(d.jsxs)(t.k,{children:[Object(d.jsx)("h3",{className:"profile-page-header",children:"Change Password"}),Object(d.jsx)(t.H,{children:Object(d.jsx)("div",{className:"col-lg-8 offset-lg-2 col-md-12",children:Object(d.jsx)(t.g,{className:"mt-4 card-change-password",children:Object(d.jsx)(t.h,{children:Object(d.jsxs)(t.s,{children:[Object(d.jsxs)("div",{className:"mb-2",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"userOldPass",children:"Old Password"}),Object(d.jsxs)("div",{className:"password-container",children:[Object(d.jsx)(t.w,{type:a?"text":"password",name:"old_password",id:"old_password",className:"custom-forminput-6",value:G.values.old_password,onChange:G.handleChange}),Object(d.jsx)("img",{className:"pwd-container-img",title:a?"Hide Old password":"Show Old password",src:a?o.a:r.a,onClick:function(){return h((function(e){return!e}))}})]})]}),Object(d.jsxs)("div",{className:"mb-2",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"userNewPass",children:"New Password"}),Object(d.jsxs)("div",{className:"password-container",children:[Object(d.jsx)(t.w,{type:x?"text":"password",name:"new_password",id:"new_password",className:"custom-forminput-6",value:G.values.new_password,onChange:G.handleChange}),Object(d.jsx)("img",{className:"pwd-container-img",title:x?"Hide New password":"Show New password",src:x?o.a:r.a,onClick:function(){return v((function(e){return!e}))}})]})]}),Object(d.jsxs)("div",{className:"mb-2",children:[Object(d.jsx)(t.x,{className:"custom-label-5",htmlFor:"userConfPass",children:"Confirm Password"}),Object(d.jsxs)("div",{className:"password-container",children:[Object(d.jsx)(t.w,{type:N?"text":"password",name:"new_password_confirm",id:"new_password_confirm",className:"custom-forminput-6",value:G.values.new_password_confirm,onChange:G.handleChange}),Object(d.jsx)("img",{className:"pwd-container-img",title:N?"Hide Confirm password":"Show Confirm password",src:N?o.a:r.a,onClick:function(){return _((function(e){return!e}))}})]})]}),Object(d.jsxs)("div",{className:"project-form-button-holders mt-3",children:[Object(d.jsx)(t.f,{className:"profile-form-btn update-profile",disabled:!G.isValid,type:"button",onClick:G.handleSubmit,children:"Update Password"}),Object(d.jsx)(t.f,{className:"profile-form-btn cancel-update",type:"button",onClick:G.resetForm,children:"Cancel"})]})]})})})})})]})})]})]})]})})}},567:function(e,s,a){"use strict";s.a=a.p+"static/media/Showpass-show.ab5421f5.svg"},568:function(e,s,a){"use strict";s.a=a.p+"static/media/Hide.31c620fc.svg"},926:function(e,s,a){},927:function(e,s,a){}}]);
//# sourceMappingURL=28.9ffcfe1f.chunk.js.map