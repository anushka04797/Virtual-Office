(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[29],{1148:function(e,t,a){"use strict";a.r(t);var s=a(16),n=a(33),r=a(0),l=a.n(r),o=(a(1149),a(513)),c=a(496),i=a(803),u=a.n(i),d=a(76),j=a.n(d),p=a(95),h=a(11),f=a(4);t.default=function(){var e=Object(r.useState)([]),t=Object(n.a)(e,2),a=(t[0],t[1],Object(h.g)(),Object(r.useState)([])),i=Object(n.a)(a,2),d=i[0],b=i[1],g=Object(r.useState)(),m=Object(n.a)(g,2),O=(m[0],m[1],Object(r.useState)([])),v=Object(n.a)(O,2),_=v[0],x=v[1],N=Object(r.useState)([]),y=Object(n.a)(N,2),S=y[0],W=y[1],A=Object(p.c)((function(e){var t=[];return Array.from(e.projects.pm_projects).forEach((function(e,a){t.push(e)})),console.log("all Projects",t),t})),P=Object(r.useState)([]),w=Object(n.a)(P,2),k=(w[0],w[1]),D=Object(r.useState)(),H=Object(n.a)(D,2),B=(H[0],H[1]),F=Object(r.useState)(),C=Object(n.a)(F,2),E=(C[0],C[1]),J=Object(r.useState)([]),K=Object(n.a)(J,2),M=K[0],R=K[1],T=Object(r.useState)(A),q=Object(n.a)(T,2),z=(q[0],q[1]),G=Object(r.useState)([]),I=Object(n.a)(G,2),L=(I[0],I[1]),Q=Object(r.useState)([]),U=Object(n.a)(Q,2),V=U[0],X=U[1],Y=Object(r.useState)([]),Z=Object(n.a)(Y,2),$=(Z[0],Z[1],[]),ee=[],te=[],ae=[],se=[],ne=function(){for(var e=0;e<ee.length;e++){var t,a=[],n=[];a=Object(s.a)(ee[e]),a=Object(s.a)(j()(a,"id")),t=Object(s.a)(te[e]),n=Object(s.a)(u()(t,"assignee_id")),n=Object(s.a)(j()(n,"assignee_id")),console.log("temp1",a,"temp2",n);for(var r=new Map,l=0;l<n.length;l++)r.set(n[l].assignee_id,!0);for(var o=[],c=0;c<a.length;c++)void 0==r.get(a[c].id)&&(o.push(a[c]),console.log("temp1[i]",a[c].id));console.log("assignees with no wbs",o),se.push(o),X(se)}console.log("final array",se),L(se),console.log("project array",$),console.log("all assignee",ee),console.log("all wbs",te),k($)},re=function(e){var t=[];if(console.log("filter",e),e.find((function(e){return"all"==e.value})))t.push(M),console.log("temp all",t);else{for(var a=0;a<e.length;a++){console.log("options len",e[a].value);for(var s=0;s<A.length;s++)console.log("projects len",A[s]),e[a].value==A[s].project.task_delivery_order.id&&(console.log("id1 ",e[a].value,"id2",A[s].project.task_delivery_order.id),t.push(A[s]),console.log("temp array",t))}console.log("filtered array",t)}z(t),function(e){console.log("filtered projects",e),ne();for(var t=[],a=0;a<e.length;a++)t.push({data:e[a],name:e[a].project.task_delivery_order.title,id:e[a].project.task_delivery_order.id,startDate:e[a].project.date_created,endDate:e[a].project.planned_delivery_date,plannedHours:e[a].project.planned_hours,remainingHrs:e[a].project.remaining_hours,assignees:e[a].assignees,totalAssignee:e[a].assignees.length,totalWBS:e[a].project.wbs_list.length,noWbsPeople:V[a],totalNoWbsPeople:V[a].length});console.log("filtered details array",t),R(t)}(t)};return l.a.useEffect((function(){A.length>0&&0==_.length&&(x(A),function(e){for(var t=[],a=0;a<e.length;a++)ee[a]=e[a].assignees,te[a]=e[a].project.wbs_list,t.push({data:e[a],label:e[a].project.task_delivery_order.title,value:e[a].project.task_delivery_order.id});t.unshift({label:"Select All",value:"all",data:{}}),console.log("options",t[0].data),console.log("allAssignee array",ee),console.log("wbslist",te),console.log("details array ",ae),B(ee),E(te),W(t),ne(),console.log("projects",e);for(var s=0;s<e.length;s++)ae.push({data:e[s],name:e[s].project.task_delivery_order.title,id:e[s].project.task_delivery_order.id,startDate:e[s].project.date_created,endDate:e[s].project.planned_delivery_date,plannedHours:e[s].project.planned_hours,remainingHrs:e[s].project.remaining_hours,assignees:e[s].assignees,totalAssignee:e[s].assignees.length,totalWBS:e[s].project.wbs_list.length,noWbsPeople:se[s],totalNoWbsPeople:se[s].length});console.log("details array",ae),R(ae)}(A))}),[A]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(c.K,{children:[Object(f.jsx)(c.k,{lg:"9"}),Object(f.jsx)(c.k,{lg:"3",className:"mb-3 pl-4",children:Object(f.jsx)(o.a,{className:"custom-forminput-6",placeholder:"Filter by Projects",searchable:!0,options:S,isMulti:!0,onChange:function(e,t){console.log("select ",e,"action ",t),"select-option"==t.action?e.find((function(e){return"all"==e.value}))?(re(S.filter((function(e){return"all"!=e.value}))),b(S.filter((function(e){return"all"!=e.value})))):(b(e),re(e)):"clear"==t.action?(b([]),re(S.filter((function(e){return"all"!=e.value})))):"remove-value"==t.action&&(b(e),0==e.length?re(S.filter((function(e){return"all"!=e.value}))):re(e))},value:d})})]}),Object(f.jsxs)("div",{className:"main-holder-projects",children:[Object(f.jsxs)("h3",{className:"projectsHeader",children:["Project Wise WBS Details (",M.length,")"," "]}),Object(f.jsx)("div",{className:"card-holder1",children:Object(f.jsx)(c.K,{children:Array.from(M).map((function(e,t){return Object(f.jsx)(c.k,{lg:"4 ",children:Object(f.jsxs)(c.g,{className:"project-card1",children:[" ",Object(f.jsxs)(c.h,{children:[Object(f.jsxs)("h5",{className:"card-details1",children:[Object(f.jsxs)("span",{className:"p-header-3",children:["Project Name: ",e.name]})," "]}),Object(f.jsxs)("h5",{className:"card-details1",children:[Object(f.jsxs)("span",{className:"p-header-3",children:["Start Date:"," ",e.startDate.substring(0,e.startDate.indexOf(" "))]})," "]}),Object(f.jsxs)("h5",{className:"card-details1",children:[Object(f.jsxs)("span",{className:"p-header-3",children:["Planned Hours: ",Number(e.plannedHours).toFixed(2)," "]})," "]}),Object(f.jsxs)("h5",{className:"card-details1",children:[Object(f.jsxs)("span",{className:"p-header-3",children:["Remaining Hours: ",Number(e.remainingHrs).toFixed(2)," "]})," "]}),Object(f.jsx)("h5",{className:"card-details1",children:Object(f.jsxs)("span",{className:"p-header-3",children:["Planned Delivery Date: ",e.endDate]})}),Object(f.jsxs)("h5",{className:"card-details1",children:[Object(f.jsxs)("span",{className:"p-header-3",children:["Assignees(",e.totalAssignee,") :",e.totalAssignee>1&&Array.from(e.assignees).map((function(e,t){return"  "+e.first_name+" "+e.last_name+", "})),e.totalAssignee<=1&&Array.from(e.assignees).map((function(e,t){return"  "+e.first_name+" "+e.last_name}))]})," "]}),Object(f.jsxs)("h5",{className:"card-details1",children:[Object(f.jsxs)("span",{className:"p-header-3",children:["Total Created WBS : ",e.totalWBS]})," "]}),Object(f.jsx)("h5",{className:"card-details1",children:Object(f.jsxs)("span",{className:"p-header-4",children:["Assignees with No WBS (",e.totalNoWbsPeople,") :",e.totalNoWbsPeople>1&&Array.from(e.noWbsPeople).map((function(e,t){return"  "+e.first_name+" "+e.last_name+", "})),e.totalNoWbsPeople<=1&&Array.from(e.noWbsPeople).map((function(e,t){return"  "+e.first_name+" "+e.last_name}))]})})]})]})})}))})})]})]})}},1149:function(e,t,a){},671:function(e,t,a){var s=a(170),n=a(703),r=a(708),l=a(171),o=a(709),c=a(166);e.exports=function(e,t,a){var i=-1,u=n,d=e.length,j=!0,p=[],h=p;if(a)j=!1,u=r;else if(d>=200){var f=t?null:o(e);if(f)return c(f);j=!1,u=l,h=new s}else h=t?[]:p;e:for(;++i<d;){var b=e[i],g=t?t(b):b;if(b=a||0!==b?b:0,j&&g===g){for(var m=h.length;m--;)if(h[m]===g)continue e;t&&h.push(g),p.push(b)}else u(h,g,a)||(h!==p&&h.push(g),p.push(b))}return p}},703:function(e,t,a){var s=a(704);e.exports=function(e,t){return!!(null==e?0:e.length)&&s(e,t,0)>-1}},704:function(e,t,a){var s=a(705),n=a(706),r=a(707);e.exports=function(e,t,a){return t===t?r(e,t,a):s(e,n,a)}},705:function(e,t){e.exports=function(e,t,a,s){for(var n=e.length,r=a+(s?1:-1);s?r--:++r<n;)if(t(e[r],r,e))return r;return-1}},706:function(e,t){e.exports=function(e){return e!==e}},707:function(e,t){e.exports=function(e,t,a){for(var s=a-1,n=e.length;++s<n;)if(e[s]===t)return s;return-1}},708:function(e,t){e.exports=function(e,t,a){for(var s=-1,n=null==e?0:e.length;++s<n;)if(a(t,e[s]))return!0;return!1}},709:function(e,t,a){var s=a(173),n=a(710),r=a(166),l=s&&1/r(new s([,-0]))[1]==1/0?function(e){return new s(e)}:n;e.exports=l},710:function(e,t){e.exports=function(){}},803:function(e,t,a){var s=a(168),n=a(671);e.exports=function(e,t){return e&&e.length?n(e,s(t,2)):[]}}}]);
//# sourceMappingURL=29.5b13f701.chunk.js.map