(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[29],{1148:function(e,t,a){"use strict";a.r(t);var s=a(16),r=a(33),n=a(0),o=a.n(n),c=(a(1149),a(513)),l=a(496),i=a(803),d=a.n(i),p=a(76),u=a.n(p),j=a(95),_=a(1585),h=a(11),g=(a(8),a(4));t.default=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=(t[0],t[1],Object(n.useState)([])),i=Object(r.a)(a,2),p=(i[0],i[1],Object(n.useState)([])),b=Object(r.a)(p,2),f=b[0],m=(b[1],Object(n.useState)([])),v=Object(r.a)(m,2),O=(v[0],v[1],Object(n.useState)([])),k=Object(r.a)(O,2),x=(k[0],k[1],Object(n.useState)([])),y=Object(r.a)(x,2),w=y[0],N=y[1],S=Object(h.g)(),W=Object(n.useState)([]),A=Object(r.a)(W,2),P=A[0],D=A[1],B=Object(n.useState)(),H=Object(r.a)(B,2),C=(H[0],H[1],Object(n.useState)([])),E=Object(r.a)(C,2),F=E[0],J=E[1],K=Object(n.useState)([]),M=Object(r.a)(K,2),T=M[0],z=M[1],q=Object(j.c)((function(e){var t=[];return Array.from(e.projects.pm_projects).forEach((function(e,a){t.push(e)})),console.log("all Projects",t),t})),G=Object(n.useState)([]),I=Object(r.a)(G,2),L=(I[0],I[1]),Q=Object(n.useState)(),R=Object(r.a)(Q,2),U=(R[0],R[1]),V=Object(n.useState)(),X=Object(r.a)(V,2),Y=(X[0],X[1]),Z=Object(n.useState)([]),$=Object(r.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(q),se=Object(r.a)(ae,2),re=(se[0],se[1]),ne=Object(n.useState)([]),oe=Object(r.a)(ne,2),ce=(oe[0],oe[1]),le=Object(n.useState)([]),ie=Object(r.a)(le,2),de=ie[0],pe=ie[1],ue=Object(n.useState)([]),je=Object(r.a)(ue,2),_e=je[0],he=je[1],ge=[],be=[],fe=[],me=[],ve=[],Oe=function(){for(var e=0;e<be.length;e++){var t,a=[],r=[];a=Object(s.a)(be[e]),a=Object(s.a)(u()(a,"id")),t=Object(s.a)(fe[e]),r=Object(s.a)(d()(t,"assignee_id")),r=Object(s.a)(u()(r,"assignee_id")),console.log("temp1",a,"temp2",r);for(var n=new Map,o=0;o<r.length;o++)n.set(r[o].assignee_id,!0);for(var c=[],l=0;l<a.length;l++)void 0==n.get(a[l].id)&&(c.push(a[l]),console.log("temp1[i]",a[l].id));console.log("assignees with no wbs",c),ve.push(c),pe(ve)}console.log("final array",ve),ce(ve),console.log("project array",ge),console.log("all assignee",be),console.log("all wbs",fe),L(ge)},ke=function(e){var t=[];if(console.log("filter",e),e.find((function(e){return"all"==e.value})))t.push(f),console.log("temp all",t);else{for(var a=0;a<e.length;a++){console.log("options len",e[a].value);for(var s=0;s<q.length;s++)console.log("projects len",q[s]),e[a].value==q[s].project.task_delivery_order.id&&(console.log("id1 ",e[a].value,"id2",q[s].project.task_delivery_order.id),t.push(q[s]),console.log("temp array",t))}console.log("filtered array",t)}re(t),function(e){he(e),console.log("filtered projects",e),Oe();for(var t=[],a=0;a<e.length;a++)t.push({data:e[a],name:e[a].project.sub_task,tdo:e[a].project.task_delivery_order.title,id:e[a].project.task_delivery_order.id,startDate:e[a].project.date_created,endDate:e[a].project.planned_delivery_date,plannedHours:e[a].project.planned_hours,remainingHrs:e[a].project.remaining_hours,assignees:e[a].assignees,totalAssignee:e[a].assignees.length,totalWBS:e[a].project.wbs_list.length,noWbsPeople:de[a],totalNoWbsPeople:de[a].length});console.log("filtered details array",t),te(t);for(var s=[],r=0;r<e.length;r++){for(var n=e[r].assignees,o={assignees:[],date_created:e[r].project.date_created,date_updated:e[r].project.date_updated,description:e[r].project.description,estimated_person:e[r].project.estimated_person,id:e[r].project.id,planned_delivery_date:e[r].project.planned_delivery_date,planned_hours:e[r].project.planned_hours,planned_value:e[r].project.planned_value,pm:e[r].project.pm,remaining_hours:e[r].project.remaining_hours,start_date:e[r].project.start_date,status:e[r].project.status,sub_task:e[r].project.sub_task,task_delivery_order:e[r].project.task_delivery_order,task_title:e[r].project.task_title,work_package_index:e[r].project.work_package_index,work_package_number:e[r].project.work_package_number},c=0;c<n.length;c++){var l={assignee:n[c]};o.assignees.push(l)}s.push(o)}N(s),console.log("wbsinfo",s)}(t)};return o.a.useEffect((function(){q.length>0&&0==F.length&&(J(q),function(e){for(var t=[],a=0;a<e.length;a++)be[a]=e[a].assignees,fe[a]=e[a].project.wbs_list,t.push({data:e[a],label:e[a].project.task_delivery_order.title,value:e[a].project.task_delivery_order.id});t.unshift({label:"Select All",value:"all",data:{}}),console.log("options",t[0].data),console.log("allAssignee array",be),console.log("wbslist",fe),console.log("details array ",me),U(be),Y(fe),z(t),Oe(),console.log("optionprojects",e),he(e);for(var s=0;s<e.length;s++)me.push({data:e[s],name:e[s].project.sub_task,tdo:e[s].project.task_delivery_order.title,id:e[s].project.task_delivery_order.id,startDate:e[s].project.date_created,endDate:e[s].project.planned_delivery_date,plannedHours:e[s].project.planned_hours,remainingHrs:e[s].project.remaining_hours,assignees:e[s].assignees,totalAssignee:e[s].assignees.length,totalWBS:e[s].project.wbs_list.length,noWbsPeople:ve[s],totalNoWbsPeople:ve[s].length});for(var r=[],n=0;n<e.length;n++){for(var o=e[n].assignees,c={assignees:[],date_created:e[n].project.date_created,date_updated:e[n].project.date_updated,description:e[n].project.description,estimated_person:e[n].project.estimated_person,id:e[n].project.id,planned_delivery_date:e[n].project.planned_delivery_date,planned_hours:e[n].project.planned_hours,planned_value:e[n].project.planned_value,pm:e[n].project.pm,remaining_hours:e[n].project.remaining_hours,start_date:e[n].project.start_date,status:e[n].project.status,sub_task:e[n].project.sub_task,task_delivery_order:e[n].project.task_delivery_order,task_title:e[n].project.task_title,work_package_index:e[n].project.work_package_index,work_package_number:e[n].project.work_package_number},l=0;l<o.length;l++){var i={assignee:o[l]};c.assignees.push(i)}r.push(c),console.log("wbs1",r)}N(r),console.log("details array",me),te(me)}(q))}),[q]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(l.K,{children:[Object(g.jsx)(l.k,{lg:"9"}),Object(g.jsx)(l.k,{lg:"3",className:"mb-3 pl-4",children:Object(g.jsx)(c.a,{className:"custom-forminput-6",placeholder:"Filter by TDOs",searchable:!0,options:T,isMulti:!0,onChange:function(e,t){console.log("select ",e,"action ",t),"select-option"==t.action?e.find((function(e){return"all"==e.value}))?(ke(T.filter((function(e){return"all"!=e.value}))),D(T.filter((function(e){return"all"!=e.value})))):(D(e),ke(e)):"clear"==t.action?(D([]),ke(T.filter((function(e){return"all"!=e.value})))):"remove-value"==t.action&&(D(e),0==e.length?ke(T.filter((function(e){return"all"!=e.value}))):ke(e))},value:P})})]}),Object(g.jsxs)("div",{className:"main-holder-projects",children:[Object(g.jsxs)("h3",{className:"projectsHeader",children:["Project Wise WBS Details (",ee.length,")"," "]}),Object(g.jsx)("div",{className:"card-holder1",children:Object(g.jsx)(l.K,{children:Array.from(ee).map((function(e,t){return Object(g.jsx)(l.k,{lg:"4",children:Object(g.jsxs)(l.g,{className:"project-card1",children:[" ",Object(g.jsxs)(l.h,{onClick:function(){S.push({pathname:"/dashboard/Projects/my-projects/details/"+_e[t].project.work_package_number,state:{project:_e[t]}})},children:[Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["TDO: ",e.tdo]})," "]}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Project Name: ",e.name]})," "]}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Start Date:"," ",e.startDate.substring(0,e.startDate.indexOf(" "))]})," "]}),Object(g.jsx)("h5",{className:"card-details1",children:Object(g.jsxs)("span",{className:"p-header-3",children:["Planned Delivery Date: ",e.endDate]})}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Assignees(",e.totalAssignee,") :",e.totalAssignee>1&&Array.from(e.assignees).map((function(e,t){return"  "+e.first_name+" "+e.last_name+", "})),e.totalAssignee<=1&&Array.from(e.assignees).map((function(e,t){return"  "+e.first_name+" "+e.last_name}))]})," "]}),Object(g.jsx)("h5",{className:"card-details1",children:Object(g.jsxs)("span",{className:"p-header-4",children:["Assignees with No WBS (",e.totalNoWbsPeople,") :",e.totalNoWbsPeople>1&&Array.from(e.noWbsPeople).map((function(e,t){return"  "+e.first_name+" "+e.last_name+", "})),e.totalNoWbsPeople<=1&&Array.from(e.noWbsPeople).map((function(e,t){return"  "+e.first_name+" "+e.last_name}))]})})]}),Object(g.jsx)(l.i,{children:Object(g.jsx)(_.a,{type:"button",className:"create-wbs-from-modal float-right",size:"sm",onClick:function(){console.log("wbsinfo",w[t]),S.push({pathname:"/dashboard/WBS/create-wbs",state:{task:w[t]}})},children:"Create WBS"})})]})},t)}))})})]})]})}},1149:function(e,t,a){},671:function(e,t,a){var s=a(170),r=a(703),n=a(708),o=a(171),c=a(709),l=a(166);e.exports=function(e,t,a){var i=-1,d=r,p=e.length,u=!0,j=[],_=j;if(a)u=!1,d=n;else if(p>=200){var h=t?null:c(e);if(h)return l(h);u=!1,d=o,_=new s}else _=t?[]:j;e:for(;++i<p;){var g=e[i],b=t?t(g):g;if(g=a||0!==g?g:0,u&&b===b){for(var f=_.length;f--;)if(_[f]===b)continue e;t&&_.push(b),j.push(g)}else d(_,b,a)||(_!==j&&_.push(b),j.push(g))}return j}},703:function(e,t,a){var s=a(704);e.exports=function(e,t){return!!(null==e?0:e.length)&&s(e,t,0)>-1}},704:function(e,t,a){var s=a(705),r=a(706),n=a(707);e.exports=function(e,t,a){return t===t?n(e,t,a):s(e,r,a)}},705:function(e,t){e.exports=function(e,t,a,s){for(var r=e.length,n=a+(s?1:-1);s?n--:++n<r;)if(t(e[n],n,e))return n;return-1}},706:function(e,t){e.exports=function(e){return e!==e}},707:function(e,t){e.exports=function(e,t,a){for(var s=a-1,r=e.length;++s<r;)if(e[s]===t)return s;return-1}},708:function(e,t){e.exports=function(e,t,a){for(var s=-1,r=null==e?0:e.length;++s<r;)if(a(t,e[s]))return!0;return!1}},709:function(e,t,a){var s=a(173),r=a(710),n=a(166),o=s&&1/n(new s([,-0]))[1]==1/0?function(e){return new s(e)}:r;e.exports=o},710:function(e,t){e.exports=function(){}},803:function(e,t,a){var s=a(168),r=a(671);e.exports=function(e,t){return e&&e.length?r(e,s(t,2)):[]}}}]);
//# sourceMappingURL=29.07fdd67a.chunk.js.map