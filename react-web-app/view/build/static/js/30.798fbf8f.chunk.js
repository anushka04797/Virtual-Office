(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[30],{1113:function(e,t,a){"use strict";a.r(t);var s=a(31),r=a(0),n=a.n(r),l=(a(1114),a(514)),o=a(493),c=a(623),i=a.n(c),d=(a(72),a(94)),p=a(1542),u=a(10),j=a(8),h=a(7);t.default=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),a=(t[0],t[1]),c=Object(r.useState)([]),_=Object(s.a)(c,2),g=_[0],f=_[1],b=Object(r.useState)([]),v=Object(s.a)(b,2),m=v[0],O=v[1],k=Object(r.useState)([]),x=Object(s.a)(k,2),y=x[0],w=x[1],N=Object(r.useState)([]),S=Object(s.a)(N,2),D=(S[0],S[1],Object(u.g)()),T=Object(r.useState)([]),A=Object(s.a)(T,2),W=A[0],B=A[1],C=Object(r.useState)(),E=Object(s.a)(C,2),P=(E[0],E[1],Object(r.useState)([])),F=Object(s.a)(P,2),J=F[0],K=F[1],z=Object(r.useState)([]),H=Object(s.a)(z,2),M=H[0],q=H[1],G=Object(d.c)((function(e){var t=[];return Array.from(e.projects.pm_projects).forEach((function(e,a){t.push(e)})),t})),I=Object(r.useState)([G]),L=Object(s.a)(I,2),Q=(L[0],L[1],Object(r.useState)(G)),R=Object(s.a)(Q,2),U=R[0],V=R[1],X=function(e){var t=[];if(console.log("filter",e),e.find((function(e){return"all"==e.value})))t.push(m),console.log("temp all",t);else{for(var a=0;a<e.length;a++)for(var s=0;s<m.length;s++)e[a].value==m[s].data.project.task_delivery_order.id&&(console.log(e[a].value,"matched! ",m[s].data.project.task_delivery_order.id),t.push(m[s].data));console.log("filtered array",t)}!function(e){console.log("data passed",e.length);for(var t=[],a=0;a<e.length;a++){var s=e[a].allassignees;t.push({data:e[a],name:e[a].project.sub_task,tdo:e[a].project.task_delivery_order.title,id:e[a].project.task_delivery_order.id,startDate:e[a].project.date_created,endDate:e[a].project.planned_delivery_date,allassignees:e[a].allassignees,everyone:[],total:Number(e[a].assignees.length),assignees:e[a].assignees,wbs:e[a].project.wbs_list.length,nowbspeople:[],taskTitle:e[a].project.task_title});for(var r=0;r<s.length;r++){var n=s[r].assignee.first_name+" "+s[r].assignee.last_name;t[a].everyone.push(n)}for(var l=e[a].assignees,o=0;o<l.length;o++){var c=l[o].assignee.first_name+" "+l[o].assignee.last_name+",";t[a].nowbspeople.push(c)}}console.log("info array from populate",t),V(t);for(var i=[],d=0;d<e.length;d++)e[d].allassignees,i.push({assignees:e[d].allassignees,date_created:e[d].project.date_created,date_updated:e[d].project.date_updated,description:e[d].project.description,estimated_person:e[d].project.estimated_person,id:e[d].project.id,planned_delivery_date:e[d].project.planned_delivery_date,planned_hours:e[d].project.planned_hours,planned_value:e[d].project.planned_value,pm:e[d].project.pm,remaining_hours:e[d].project.remaining_hours,start_date:e[d].project.start_date,status:e[d].project.status,sub_task:e[d].project.sub_task,task_delivery_order:e[d].project.task_delivery_order,task_title:e[d].project.task_title,work_package_index:e[d].project.work_package_index,work_package_number:e[d].project.work_package_number});w(i),console.log("wbsinfoarray",i)}(t)};return n.a.useEffect((function(){G.length>0&&0==J.length&&K(G)}),[G]),n.a.useEffect((function(){j.a.get("project/assignees-with-no-wbs/").then((function(e){var t=[];console.log("api response",e.data.data);for(var s=0;s<e.data.data.length;s++)0!=e.data.data[s].assignees.length&&(console.log("length",e.data.data[s].assignees.length),t.push(e.data.data[s]));console.log("temp",t),a(t),function(e){for(var t=[],a=0;a<e.length;a++)t.push({data:e[a],label:e[a].project.task_delivery_order.title,value:e[a].project.task_delivery_order.id});t.unshift({label:"Select All",value:"all",data:{}}),console.log("list",i()(t,"value")),q(i()(t,"value")),f(i()(t,"value"));for(var s=[],r=0;r<e.length;r++){var n=e[r].allassignees;s.push({data:e[r],name:e[r].project.sub_task,tdo:e[r].project.task_delivery_order.title,id:e[r].project.task_delivery_order.id,startDate:e[r].project.date_created,endDate:e[r].project.planned_delivery_date,allassignees:e[r].allassignees,everyone:[],total:Number(e[r].assignees.length),assignees:e[r].assignees,wbs:e[r].project.wbs_list.length,nowbspeople:[],taskTitle:e[r].project.task_title});for(var l=0;l<n.length;l++){var o=n[l].assignee.first_name+" "+n[l].assignee.last_name;s[r].everyone.push(o)}for(var c=e[r].assignees,d=0;d<c.length;d++){var p=c[d].assignee.first_name+" "+c[d].assignee.last_name+",";s[r].nowbspeople.push(p)}}console.log("info array",s),O(s),V(s);for(var u=[],j=0;j<e.length;j++)e[j].allassignees,u.push({assignees:e[j].allassignees,date_created:e[j].project.date_created,date_updated:e[j].project.date_updated,description:e[j].project.description,estimated_person:e[j].project.estimated_person,id:e[j].project.id,planned_delivery_date:e[j].project.planned_delivery_date,planned_hours:e[j].project.planned_hours,planned_value:e[j].project.planned_value,pm:e[j].project.pm,remaining_hours:e[j].project.remaining_hours,start_date:e[j].project.start_date,status:e[j].project.status,sub_task:e[j].project.sub_task,task_delivery_order:e[j].project.task_delivery_order,task_title:e[j].project.task_title,work_package_index:e[j].project.work_package_index,work_package_number:e[j].project.work_package_number});w(u),console.log("wbsinfoarray",u)}(t)}))}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(o.K,{children:[Object(h.jsx)(o.k,{lg:"9"}),Object(h.jsx)(o.k,{lg:"3",className:"mb-3 pl-4",children:Object(h.jsx)(l.a,{className:"custom-forminput-6",placeholder:"Filter by TDOs",searchable:!0,options:M,isMulti:!0,onChange:function(e,t){console.log("select ",e,"action ",t),"select-option"==t.action?e.find((function(e){return"all"==e.value}))?(X(g.filter((function(e){return"all"!=e.value}))),B(g.filter((function(e){return"all"!=e.value}))),console.log("value",e)):(B(e),console.log("value",e),X(e)):"clear"==t.action?(B([]),X(g.filter((function(e){return"all"!=e.value})))):"remove-value"==t.action&&(B(e),0==e.length?X(g.filter((function(e){return"all"!=e.value}))):X(e))},value:W})})]}),Object(h.jsxs)("div",{className:"main-holder-projects",children:[Object(h.jsxs)("h3",{className:"projectsHeader",children:["Project Wise WBS Details (",U.length,")"," "]}),Object(h.jsx)("div",{className:"card-holder1",children:Object(h.jsx)(o.K,{children:Array.from(U).map((function(e,t){return Object(h.jsx)(o.k,{lg:"4",children:Object(h.jsxs)(o.g,{className:"project-card1",children:[" ",Object(h.jsxs)(o.h,{onClick:function(){},children:[Object(h.jsxs)("h5",{className:"card-details1",children:[Object(h.jsx)("span",{className:"p-header-3",children:Object(h.jsxs)("b",{children:["TDO: ",e.tdo]})})," "]}),Object(h.jsxs)("h5",{className:"card-details1",children:[Object(h.jsxs)("span",{className:"p-header-3",children:["Project Name: ",e.name]})," "]}),Object(h.jsxs)("h5",{className:"card-details1",children:[Object(h.jsxs)("span",{className:"p-header-3",children:["Task Title: ",e.taskTitle]})," "]}),Object(h.jsx)("h5",{className:"card-details1",children:Object(h.jsxs)("span",{className:"p-header-3",children:["Planned Delivery Date: ",e.endDate]})}),Object(h.jsxs)("h5",{className:"card-details1",children:[Object(h.jsxs)("span",{className:"p-header-3",children:["Assignees :"," "+e.everyone]})," "]}),Object(h.jsx)("h5",{className:"card-details1",children:Object(h.jsxs)("span",{className:"p-header-4",children:["Assignees with No WBS : ",e.nowbspeople]})})]}),Object(h.jsx)(o.i,{children:Object(h.jsx)(p.a,{type:"button",className:"create-wbs-from-modal float-right",size:"sm",onClick:function(){D.push({pathname:"/dashboard/WBS/create-wbs",state:{task:y[t]}})},children:"Create WBS"})})]})},t)}))})})]})]})}},1114:function(e,t,a){},575:function(e,t,a){var s=a(164),r=a(592),n=a(597),l=a(165),o=a(598),c=a(161);e.exports=function(e,t,a){var i=-1,d=r,p=e.length,u=!0,j=[],h=j;if(a)u=!1,d=n;else if(p>=200){var _=t?null:o(e);if(_)return c(_);u=!1,d=l,h=new s}else h=t?[]:j;e:for(;++i<p;){var g=e[i],f=t?t(g):g;if(g=a||0!==g?g:0,u&&f===f){for(var b=h.length;b--;)if(h[b]===f)continue e;t&&h.push(f),j.push(g)}else d(h,f,a)||(h!==j&&h.push(f),j.push(g))}return j}},592:function(e,t,a){var s=a(593);e.exports=function(e,t){return!!(null==e?0:e.length)&&s(e,t,0)>-1}},593:function(e,t,a){var s=a(594),r=a(595),n=a(596);e.exports=function(e,t,a){return t===t?n(e,t,a):s(e,r,a)}},594:function(e,t){e.exports=function(e,t,a,s){for(var r=e.length,n=a+(s?1:-1);s?n--:++n<r;)if(t(e[n],n,e))return n;return-1}},595:function(e,t){e.exports=function(e){return e!==e}},596:function(e,t){e.exports=function(e,t,a){for(var s=a-1,r=e.length;++s<r;)if(e[s]===t)return s;return-1}},597:function(e,t){e.exports=function(e,t,a){for(var s=-1,r=null==e?0:e.length;++s<r;)if(a(t,e[s]))return!0;return!1}},598:function(e,t,a){var s=a(166),r=a(599),n=a(161),l=s&&1/n(new s([,-0]))[1]==1/0?function(e){return new s(e)}:r;e.exports=l},599:function(e,t){e.exports=function(){}},623:function(e,t,a){var s=a(163),r=a(575);e.exports=function(e,t){return e&&e.length?r(e,s(t,2)):[]}}}]);
//# sourceMappingURL=30.798fbf8f.chunk.js.map