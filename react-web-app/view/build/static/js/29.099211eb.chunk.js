(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[29],{1118:function(e,t,a){"use strict";a.r(t);var s=a(15),r=a(30),n=a(0),o=a.n(n),l=(a(1119),a(509)),c=a(490),i=a(784),d=a.n(i),p=a(71),u=a.n(p),j=a(91),_=a(1556),g=a(10),h=a(8),b=a(5);t.default=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=(t[0],t[1]),i=Object(n.useState)([]),p=Object(r.a)(i,2),f=p[0],m=p[1],v=Object(n.useState)([]),O=Object(r.a)(v,2),k=O[0],y=O[1],x=Object(n.useState)([]),w=Object(r.a)(x,2),S=(w[0],w[1]),N=Object(n.useState)([]),A=Object(r.a)(N,2),W=(A[0],A[1],Object(n.useState)([])),D=Object(r.a)(W,2),P=D[0],B=D[1],H=Object(g.g)(),C=Object(n.useState)([]),E=Object(r.a)(C,2),F=E[0],J=E[1],K=Object(n.useState)(),M=Object(r.a)(K,2),T=(M[0],M[1],Object(n.useState)([])),z=Object(r.a)(T,2),q=z[0],G=z[1],I=Object(n.useState)([]),L=Object(r.a)(I,2),Q=(L[0],L[1]),R=Object(j.c)((function(e){var t=[];return Array.from(e.projects.pm_projects).forEach((function(e,a){t.push(e)})),console.log("all Projects",t),t})),U=Object(n.useState)([]),V=Object(r.a)(U,2),X=(V[0],V[1]),Y=Object(n.useState)(),Z=Object(r.a)(Y,2),$=(Z[0],Z[1]),ee=Object(n.useState)(),te=Object(r.a)(ee,2),ae=(te[0],te[1]),se=Object(n.useState)([]),re=Object(r.a)(se,2),ne=re[0],oe=re[1],le=Object(n.useState)(R),ce=Object(r.a)(le,2),ie=(ce[0],ce[1]),de=Object(n.useState)([]),pe=Object(r.a)(de,2),ue=(pe[0],pe[1]),je=Object(n.useState)([]),_e=Object(r.a)(je,2),ge=_e[0],he=_e[1],be=Object(n.useState)([]),fe=Object(r.a)(be,2),me=fe[0],ve=fe[1],Oe=[],ke=[],ye=[],xe=[],we=[],Se=function(){for(var e=0;e<ke.length;e++){var t,a=[],r=[];a=Object(s.a)(ke[e]),a=Object(s.a)(u()(a,"id")),t=Object(s.a)(ye[e]),r=Object(s.a)(d()(t,"assignee_id")),r=Object(s.a)(u()(r,"assignee_id")),console.log("temp1",a,"temp2",r);for(var n=new Map,o=0;o<r.length;o++)n.set(r[o].assignee_id,!0);for(var l=[],c=0;c<a.length;c++)void 0==n.get(a[c].id)&&(l.push(a[c]),console.log("temp1[i]",a[c].id));console.log("assignees with no wbs",l),we.push(l),he(we)}console.log("final array",we),ue(we),console.log("project array",Oe),console.log("all assignee",ke),console.log("all wbs",ye),X(Oe)},Ne=function(e){var t=[];if(console.log("filter",e),e.find((function(e){return"all"==e.value})))t.push(k),console.log("temp all",t);else{for(var a=0;a<e.length;a++){console.log("options len",e[a].value);for(var s=0;s<R.length;s++)console.log("projects len",R[s]),e[a].value==R[s].project.task_delivery_order.id&&(console.log("id1 ",e[a].value,"id2",R[s].project.task_delivery_order.id),t.push(R[s]),console.log("temp array",t))}console.log("filtered array",t)}ie(t),function(e){ve(e),console.log("filtered projects",e),Se();for(var t=[],a=0;a<e.length;a++)t.push({data:e[a],name:e[a].project.sub_task,tdo:e[a].project.task_delivery_order.title,id:e[a].project.task_delivery_order.id,startDate:e[a].project.date_created,endDate:e[a].project.planned_delivery_date,plannedHours:e[a].project.planned_hours,remainingHrs:e[a].project.remaining_hours,assignees:e[a].assignees,totalAssignee:e[a].assignees.length,totalWBS:e[a].project.wbs_list.length,noWbsPeople:ge[a],totalNoWbsPeople:ge[a].length});console.log("filtered details array",t),oe(t);for(var s=[],r=0;r<e.length;r++){for(var n=e[r].assignees,o={assignees:[],date_created:e[r].project.date_created,date_updated:e[r].project.date_updated,description:e[r].project.description,estimated_person:e[r].project.estimated_person,id:e[r].project.id,planned_delivery_date:e[r].project.planned_delivery_date,planned_hours:e[r].project.planned_hours,planned_value:e[r].project.planned_value,pm:e[r].project.pm,remaining_hours:e[r].project.remaining_hours,start_date:e[r].project.start_date,status:e[r].project.status,sub_task:e[r].project.sub_task,task_delivery_order:e[r].project.task_delivery_order,task_title:e[r].project.task_title,work_package_index:e[r].project.work_package_index,work_package_number:e[r].project.work_package_number},l=0;l<n.length;l++){var c={assignee:n[l]};o.assignees.push(c)}s.push(o)}B(s),console.log("wbsinfo",s)}(t)};return o.a.useEffect((function(){h.a.get("project/assignees-with-no-wbs/").then((function(e){console.log("api response",e.data.data),a(e.data.data),function(e){for(var t=[],a=0;a<e.length;a++)console.log("aaaaaaaaaaaaaa",e[a]),t.push({data:e[a],label:e[a].project.task_delivery_order.title,value:e[a].project.task_delivery_order.id});t.unshift({label:"Select All",value:"all",data:{}}),console.log("tdo list",t),m(t);for(var s=[],r=0;r<e.length;r++)s.push({data:e[r],name:e[r].project.sub_task,tdo:e[r].project.task_delivery_order.title,id:e[r].project.task_delivery_order.id,startDate:e[r].project.date_created,endDate:e[r].project.planned_delivery_date,allassignees:e[r].allassignees,totalAssignee:e[r].assignees.length,noWbsPeople:e[r].assignees});y(s);for(var n=[],o=0;o<e.length;o++){var l=e[o].allassignees;console.log("ssssssssss",l),n.push({assignees:e[o].allassignees,date_created:e[o].project.date_created,date_updated:e[o].project.date_updated,description:e[o].project.description,estimated_person:e[o].project.estimated_person,id:e[o].project.id,planned_delivery_date:e[o].project.planned_delivery_date,planned_hours:e[o].project.planned_hours,planned_value:e[o].project.planned_value,pm:e[o].project.pm,remaining_hours:e[o].project.remaining_hours,start_date:e[o].project.start_date,status:e[o].project.status,sub_task:e[o].project.sub_task,task_delivery_order:e[o].project.task_delivery_order,task_title:e[o].project.task_title,work_package_index:e[o].project.work_package_index,work_package_number:e[o].project.work_package_number})}S(n),console.log("wbsinfoarray",n)}(e.data.data)})),R.length>0&&0==q.length&&(G(R),function(e){for(var t=[],a=0;a<e.length;a++)ke[a]=e[a].assignees,ye[a]=e[a].project.wbs_list,t.push({data:e[a],label:e[a].project.task_delivery_order.title,value:e[a].project.task_delivery_order.id});t.unshift({label:"Select All",value:"all",data:{}}),console.log("options",t[0].data),console.log("allAssignee array",ke),console.log("wbslist",ye),console.log("details array ",xe),$(ke),ae(ye),Q(t),Se(),console.log("optionprojects",e),ve(e);for(var s=0;s<e.length;s++)xe.push({data:e[s],name:e[s].project.sub_task,tdo:e[s].project.task_delivery_order.title,id:e[s].project.task_delivery_order.id,startDate:e[s].project.date_created,endDate:e[s].project.planned_delivery_date,plannedHours:e[s].project.planned_hours,remainingHrs:e[s].project.remaining_hours,assignees:e[s].assignees,totalAssignee:e[s].assignees.length,totalWBS:e[s].project.wbs_list.length,noWbsPeople:we[s],totalNoWbsPeople:we[s].length});for(var r=[],n=0;n<e.length;n++){for(var o=e[n].assignees,l={assignees:[],date_created:e[n].project.date_created,date_updated:e[n].project.date_updated,description:e[n].project.description,estimated_person:e[n].project.estimated_person,id:e[n].project.id,planned_delivery_date:e[n].project.planned_delivery_date,planned_hours:e[n].project.planned_hours,planned_value:e[n].project.planned_value,pm:e[n].project.pm,remaining_hours:e[n].project.remaining_hours,start_date:e[n].project.start_date,status:e[n].project.status,sub_task:e[n].project.sub_task,task_delivery_order:e[n].project.task_delivery_order,task_title:e[n].project.task_title,work_package_index:e[n].project.work_package_index,work_package_number:e[n].project.work_package_number},c=0;c<o.length;c++){var i={assignee:o[c]};l.assignees.push(i)}r.push(l),console.log("wbs1",r)}B(r),console.log("details array",xe),oe(xe)}(R))}),[]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(c.K,{children:[Object(b.jsx)(c.k,{lg:"9"}),Object(b.jsx)(c.k,{lg:"3",className:"mb-3 pl-4",children:Object(b.jsx)(l.a,{className:"custom-forminput-6",placeholder:"Filter by TDOs",searchable:!0,options:f,isMulti:!0,onChange:function(e,t){console.log("select ",e,"action ",t),"select-option"==t.action?e.find((function(e){return"all"==e.value}))?(Ne(f.filter((function(e){return"all"!=e.value}))),J(f.filter((function(e){return"all"!=e.value})))):(J(e),Ne(e)):"clear"==t.action?(J([]),Ne(f.filter((function(e){return"all"!=e.value})))):"remove-value"==t.action&&(J(e),0==e.length?Ne(f.filter((function(e){return"all"!=e.value}))):Ne(e))},value:F})})]}),Object(b.jsxs)("div",{className:"main-holder-projects",children:[Object(b.jsxs)("h3",{className:"projectsHeader",children:["Project Wise WBS Details (",ne.length,")"," "]}),Object(b.jsx)("div",{className:"card-holder1",children:Object(b.jsx)(c.K,{children:Array.from(ne).map((function(e,t){return Object(b.jsx)(c.k,{lg:"4",children:Object(b.jsxs)(c.g,{className:"project-card1",children:[" ",Object(b.jsxs)(c.h,{onClick:function(){H.push({pathname:"/dashboard/Projects/my-projects/details/"+me[t].project.work_package_number,state:{project:me[t]}})},children:[Object(b.jsxs)("h5",{className:"card-details1",children:[Object(b.jsxs)("span",{className:"p-header-3",children:["TDO: ",e.tdo]})," "]}),Object(b.jsxs)("h5",{className:"card-details1",children:[Object(b.jsxs)("span",{className:"p-header-3",children:["Project Name: ",e.name]})," "]}),Object(b.jsxs)("h5",{className:"card-details1",children:[Object(b.jsxs)("span",{className:"p-header-3",children:["Start Date:"," ",e.startDate.substring(0,e.startDate.indexOf(" "))]})," "]}),Object(b.jsx)("h5",{className:"card-details1",children:Object(b.jsxs)("span",{className:"p-header-3",children:["Planned Delivery Date: ",e.endDate]})}),Object(b.jsxs)("h5",{className:"card-details1",children:[Object(b.jsxs)("span",{className:"p-header-3",children:["Assignees(",e.totalAssignee,") :",e.totalAssignee>1&&Array.from(e.assignees).map((function(e,t){return"  "+e.first_name+" "+e.last_name+", "})),e.totalAssignee<=1&&Array.from(e.assignees).map((function(e,t){return"  "+e.first_name+" "+e.last_name}))]})," "]}),Object(b.jsx)("h5",{className:"card-details1",children:Object(b.jsxs)("span",{className:"p-header-4",children:["Assignees with No WBS (",e.totalNoWbsPeople,") :",e.totalNoWbsPeople>1&&Array.from(e.noWbsPeople).map((function(e,t){return"  "+e.first_name+" "+e.last_name+", "})),e.totalNoWbsPeople<=1&&Array.from(e.noWbsPeople).map((function(e,t){return"  "+e.first_name+" "+e.last_name}))]})})]}),Object(b.jsx)(c.i,{children:Object(b.jsx)(_.a,{type:"button",className:"create-wbs-from-modal float-right",size:"sm",onClick:function(){console.log("wbsinfo",P[t]),H.push({pathname:"/dashboard/WBS/create-wbs",state:{task:P[t]}})},children:"Create WBS"})})]})},t)}))})})]})]})}},1119:function(e,t,a){},664:function(e,t,a){var s=a(163),r=a(694),n=a(699),o=a(164),l=a(700),c=a(160);e.exports=function(e,t,a){var i=-1,d=r,p=e.length,u=!0,j=[],_=j;if(a)u=!1,d=n;else if(p>=200){var g=t?null:l(e);if(g)return c(g);u=!1,d=o,_=new s}else _=t?[]:j;e:for(;++i<p;){var h=e[i],b=t?t(h):h;if(h=a||0!==h?h:0,u&&b===b){for(var f=_.length;f--;)if(_[f]===b)continue e;t&&_.push(b),j.push(h)}else d(_,b,a)||(_!==j&&_.push(b),j.push(h))}return j}},694:function(e,t,a){var s=a(695);e.exports=function(e,t){return!!(null==e?0:e.length)&&s(e,t,0)>-1}},695:function(e,t,a){var s=a(696),r=a(697),n=a(698);e.exports=function(e,t,a){return t===t?n(e,t,a):s(e,r,a)}},696:function(e,t){e.exports=function(e,t,a,s){for(var r=e.length,n=a+(s?1:-1);s?n--:++n<r;)if(t(e[n],n,e))return n;return-1}},697:function(e,t){e.exports=function(e){return e!==e}},698:function(e,t){e.exports=function(e,t,a){for(var s=a-1,r=e.length;++s<r;)if(e[s]===t)return s;return-1}},699:function(e,t){e.exports=function(e,t,a){for(var s=-1,r=null==e?0:e.length;++s<r;)if(a(t,e[s]))return!0;return!1}},700:function(e,t,a){var s=a(166),r=a(701),n=a(160),o=s&&1/n(new s([,-0]))[1]==1/0?function(e){return new s(e)}:r;e.exports=o},701:function(e,t){e.exports=function(){}},784:function(e,t,a){var s=a(162),r=a(664);e.exports=function(e,t){return e&&e.length?r(e,s(t,2)):[]}}}]);
//# sourceMappingURL=29.099211eb.chunk.js.map