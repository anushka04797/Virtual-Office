(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[39],{1480:function(e,t,a){"use strict";a.r(t);var s=a(12),o=a(31),l=a(493),r=a(806),n=a.n(r),c=a(0),d=a.n(c),i=(a(630),a(515)),u=a(96),b=a(8),j=a(504),m=a(532),h=a(642),p=(a(682),a(508),a(70)),f=a.n(p),_=a(512),O=a.n(_),v=a(145),g=a(116),y=a(7),x=function(e){var t=Object(c.useState)(!1),a=Object(o.a)(t,2),s=a[0],r=a[1],n=Object(u.c)((function(e){var t=[];return Array.from(e.holidays.data).forEach((function(e,a){t.push({label:e.holiday_title,value:e.id,data:e})})),t})),d=Object(c.useState)([]),h=Object(o.a)(d,2),p=h[0],f=h[1],_=Object(c.useState)(""),x=Object(o.a)(_,2),k=x[0],w=x[1],S=Object(u.c)((function(e){var t=[];return Array.from(e.worktypes.data).forEach((function(e,a){t.push({label:e.title,value:e.title,description:e.description,data:e})})),console.log("worktype",t),t})),C=Object(u.b)(),D=(Object(j.h)(e.employee.id),Object(m.a)({initialValues:{project:"",task_title:"",actual_work_done:"",hours:"",hours_type:"",wbs:"",hour_description:"",assignee:e.employee},validateOnChange:!0,validateOnBlur:!0,validate:function(e){var t={};return e.hours_type||(t.hours_type="Hour Type is required!"),e.project||(t.project="Project is required!"),e.wbs||(t.wbs="Wbs is required!"),e.actual_work_done||(t.actual_work_done="Details is required!"),parseInt(e.hours)<1&&(t.hours="Invalid hours value!"),t},onSubmit:function(t){console.log("values",D.values);var a={hours_type:D.values.hours_type,hours:D.values.hours,hour_description:D.values.hour_description?D.values.hour_description:"",assignee:e.employee,actual_work_done:D.values.actual_work_done,project:D.values.project,wbs:D.values.wbs,task_title:D.values.task_title};b.a.post("wbs/time-card/add/",a).then((function(t){console.log(t.data),e.onClose(),r(!s),D.resetForm(),F({label:null,value:null}),z(),W(null),w(null),O()("Successfully Added!","","success")})),r(!1)}}));Object(c.useEffect)((function(){console.log("add tc props",e.employee),C(Object(v.b)()),C(Object(g.d)());var t=[];b.a.get("project/assigned/all/"+e.employee+"/").then((function(e){console.log("assigned projects",e.data);for(var a=0;a<e.data.data.length;a++)t.push({label:e.data.data[a].project.sub_task,value:e.data.data[a].project.id,data:e.data.data[a]});console.log("temp p",t),f(t)}))}),[e]);var N=Object(c.useState)({label:"",value:""}),M=Object(o.a)(N,2),T=M[0],F=M[1],Y=Object(c.useState)(),P=Object(o.a)(Y,2),A=P[0],z=P[1],H=Object(c.useState)(),E=Object(o.a)(H,2),V=E[0],W=E[1],B=function(){D.resetForm(),F({label:null,value:null}),z(),W(null),w(null)};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(l.B,{closeOnBackdrop:!1,show:e.show,onClose:function(){e.onClose(),B()},toggle:e.toggle,size:"lg",children:[Object(y.jsxs)(l.t,{children:[Object(y.jsx)(l.E,{closeButton:!0,children:"Enter New Timecard Item Details"}),Object(y.jsx)(l.C,{children:Object(y.jsxs)(l.K,{children:[Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{className:"custom-label-5",htmlFor:"assigneeSelectPM",loseMenuOnSelect:!0,isClearable:!1,isMulti:!1,children:"Hour Type :"}),Object(y.jsx)(i.a,{id:"hours_type",name:"hours_type",options:S,onChange:function(e){F(e),"RHR"!=e.label&&"WFH"!=e.label&&"OTO"!=e.label&&"OTS"!=e.label?(console.log("if"),D.setValues({hours_type:e.value,actual_work_done:e.description})):(console.log("else"),D.setValues({hours_type:e.value,actual_work_done:""}))},value:T}),D.touched.hours_type&&D.errors.hours_type&&Object(y.jsx)("small",{style:{color:"red"},children:D.errors.hours_type})]}),"HOL"==T.label&&Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{className:"custom-label-wbs5",children:"Select Holiday : "}),Object(y.jsx)(i.a,{id:"project",name:"project",className:"custom-forminput-5",onChange:function(e,t){console.log(e),D.setFieldValue("hours",e.data.hours)},options:n})]}),Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{className:"custom-label-wbs5",children:" Hour(s) : "}),Object(y.jsx)(l.y,{type:"number","aria-label":"default input example",id:"hours",name:"hours",className:"custom-forminput-5",placeholder:"0.00",min:"0.00",onChange:function(e){D.setFieldValue("hours",e.target.value)},value:D.values.hours}),D.touched.hours&&D.errors.hours&&Object(y.jsx)("small",{style:{color:"red"},children:D.errors.hours})]}),Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsxs)(l.z,{className:"custom-label-wbs5",htmlFor:"assigneeSelectPM",loseMenuOnSelect:!0,isClearable:!1,isMulti:!1,children:["Project :"," "]}),Object(y.jsx)(i.a,{id:"project",name:"project",className:"custom-forminput-5",onChange:function(t){w(t),console.log("selected Project",t.value),D.setFieldValue("project",t.value);for(var a=[],s=0;s<t.data.project.wbs_list.length;s++)parseInt(t.data.project.wbs_list[s].assignee_id)==parseInt(e.employee)&&a.push({value:t.data.project.wbs_list[s].id,label:t.data.project.wbs_list[s].title,data:t.data.project.wbs_list[s]});z(a)},options:p,value:k}),D.touched.project&&D.errors.project&&Object(y.jsx)("small",{style:{color:"red"},children:D.errors.project})]}),Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{className:"custom-label-5",htmlFor:"assigneeSelectPM",loseMenuOnSelect:!0,isClearable:!1,isMulti:!1,children:"WBS :"}),Object(y.jsx)(i.a,{id:"wbs",name:"wbs",className:"custom-forminput-5",options:A,onChange:function(e){W(e),console.log("WBS",e),D.setFieldValue("wbs",e.value)},value:V}),D.touched.wbs&&D.errors.wbs&&Object(y.jsx)("small",{style:{color:"red"},children:D.errors.wbs})]}),Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{children:"Actual Work :"}),Object(y.jsx)(l.V,{type:"text",id:"actual_work_done",name:"actual_work_done",className:"custom-forminput-5",onChange:function(e){D.setFieldValue("actual_work_done",e.target.value)},value:D.values.actual_work_done}),D.touched.actual_work_done&&D.errors.actual_work_done&&Object(y.jsx)("small",{style:{color:"red"},children:D.errors.actual_work_done})]})]})})]}),Object(y.jsxs)(l.D,{children:[Object(y.jsx)(l.f,{color:"primary",type:"button",onClick:D.handleSubmit,children:"Add"})," ",Object(y.jsx)(l.f,{color:"secondary",type:"button",onClick:function(){e.onClose(),B()},children:"Cancel"})]})]})})},k=function(e){var t,a,s,o=Object(u.c)((function(e){var t=[];return Array.from(e.worktypes.data).forEach((function(e,a){t.push({label:e.title,value:e.title,description:e.description,data:e})})),t})),r=Object(m.a)({initialValues:{actual_work_done:"",time_type:"",hours_today:""},onSubmit:function(t,a){a.setSubmitting;console.log(t),b.a.put("wbs/time-card/update/"+e.data.id+"/",t).then((function(t){console.log(t.data),200==t.status&&"OK"==t.statusText&&(r.resetForm(),e.onClose(),O()("Well Done!","Your timecard is updated","success"))})).catch((function(e){console.log(e)}))}});Object(c.useEffect)((function(){e.data&&r.setValues({actual_work_done:e.data.actual_work_done,time_type:e.data.time_type,hours_today:e.data.hours_today})}),[e.data]);return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(l.B,{show:e.show,onClose:function(){return e.onClose()},toggle:e.toggle,size:"lg",children:[Object(y.jsxs)(l.E,{closeButton:!0,children:[" ","Project Name (Work Package) :"," ",null!=(null===(t=e.data)||void 0===t?void 0:t.project)?e.data.project.sub_task+"("+(null===(a=e.data)||void 0===a?void 0:a.project.work_package_number)+")":"N/A"]}),Object(y.jsx)(l.C,{children:Object(y.jsxs)(l.K,{children:[Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{className:"custom-label-5",htmlFor:"assigneeSelectPM",loseMenuOnSelect:!0,isClearable:!1,isMulti:!1,children:"Type :"}),Object(y.jsx)(i.a,{options:o,onChange:function(e,t){console.log(e),r.setFieldValue("time_type",e.value)},defaultValue:[{label:"RHR",value:"RHR"},{label:"SIC",value:"SIC"},{label:"VAC",value:"VAC"},{label:"OTS",value:"OTS"},{label:"OTO",value:"OTO"},{label:"HOL",value:"HOL"},{label:"WFH",value:"WFH"},{label:"COM",value:"COM"},{label:"PB1",value:"PB1"},{label:"PB2",value:"PB2"}].filter((function(t){var a;return t.value===(null===(a=e.data)||void 0===a?void 0:a.time_type)}))})]}),Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{class:"form-label",children:" Hour(s):"}),Object(y.jsx)(l.y,{className:"custom-forminput-5",type:"number","aria-label":"default input example",id:"hours_today",name:"hours_today",placeholder:"0.00",min:"0.00",value:r.values.hours_today,onChange:r.handleChange})]}),Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{class:"form-label",children:" Task Title : "}),Object(y.jsx)(l.y,{value:null!=(null===(s=e.data)||void 0===s?void 0:s.project)?e.data.project.task_title:"N/A",disabled:!0})]}),Object(y.jsxs)(l.k,{className:"col-md-12 mb-3",children:[Object(y.jsx)(l.z,{class:"form-label",children:"Actual Work :"}),Object(y.jsx)(l.V,{class:"form-control",id:"actual_work_done",name:"actual_work_done",rows:"3",value:r.values.actual_work_done,onChange:r.handleChange,children:" "})]})]})}),Object(y.jsxs)(l.D,{children:[Object(y.jsx)(l.f,{color:"primary",onClick:r.handleSubmit,children:"save"})," ",Object(y.jsx)(l.f,{color:"secondary",onClick:function(){e.onClose(),r.setValues({actual_work_done:e.data.actual_work_done,time_type:e.data.time_type,hours_today:e.data.hours_today})},children:"Cancel"})]})]})})},w=a(10);t.default=function(){var e,t,a=Object(u.c)((function(e){return e.profile.data})),r=Object(c.useState)(),p=Object(o.a)(r,2),_=p[0],v=p[1],g=(Object(u.b)(),Object(c.useState)(0)),S=Object(o.a)(g,2),C=S[0],D=(S[1],Object(c.useState)([])),N=Object(o.a)(D,2),M=N[0],T=N[1],F=Object(c.useState)([]),Y=Object(o.a)(F,2),P=Y[0],A=Y[1],z=Object(c.useState)(),H=Object(o.a)(z,2),E=(H[0],H[1]),V=Object(w.h)(),W=Object(c.useState)([]),B=Object(o.a)(W,2),I=B[0],K=B[1],q=Object(c.useState)(0),R=Object(o.a)(q,2),L=R[0],J=R[1],U=Object(c.useState)(""),G=Object(o.a)(U,2),Q=G[0],X=G[1],Z=Object(c.useState)(""),$=Object(o.a)(Z,2),ee=$[0],te=$[1],ae=Object(c.useState)(0),se=Object(o.a)(ae,2),oe=se[0],le=se[1],re=Object(c.useState)(""),ne=Object(o.a)(re,2),ce=(ne[0],ne[1]),de=Object(c.useState)(),ie=Object(o.a)(de,2),ue=ie[0],be=ie[1],je=function(e){console.log("get_tc",e);var t=we(),a=t.start,s=t.end;E(e.first_name+" "+e.last_name),b.a.get("wbs/user/time-card/list/"+e.id+"/").then((function(e){console.log("assignee tc",e.data);var t=[];Array.from(e.data.data).forEach((function(a,s){console.log("res",e.data.data),t.push({data:a})}));var o;o=t.filter((function(e){return e.data.date_updated>=a&&e.data.date_updated<=s})),console.log("filtered",o),A(o);for(var l=[],r=0,c=0,d=0;d<o.length;d++){var i,u,b,j;0==o[d].data.submitted&&c++;var m=o[d];r+=parseFloat(m.data.hours_today),console.log("ele",m.data),l.push({WP:m.data.project?m.data.project.work_package_number:"-","Project Name":null!=m.data.project?null===(i=m.data.project)||void 0===i?void 0:i.sub_task:"-","Task Title":null!=m.data.project?null===(u=m.data.project)||void 0===u?void 0:u.task_title:"-",Description:null!==(b=m.data)&&void 0!==b&&b.actual_work_done?null===(j=m.data)||void 0===j?void 0:j.actual_work_done:"-","Hour(s)":m.data.hours_today,Type:m.data.time_type,"Date Created":m.data.date_created,data:m.data,id:m.data.id})}le(r),T(n()(l,"id","desc")),J(c),console.log("selected",_)}))};function me(e){return void 0!=e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}var he=Object(c.useState)(!1),pe=Object(o.a)(he,2),fe=pe[0],_e=pe[1],Oe=Object(c.useState)(!1),ve=Object(o.a)(Oe,2),ge=ve[0],ye=ve[1];d.a.useEffect((function(){console.log("executing effect"),window.scrollTo(0,0);var e=we();e.start,e.end;le(0),Object(j.g)("projects.change_projectassignee")||Object(j.g)("projects.add_projectassignee")?b.a.get("project/assignees/all/"+sessionStorage.getItem(b.k)+"/").then((function(e){var t=[];if(Array.from(e.data.data).forEach((function(e,a){t.push({data:e,value:e.id,label:me(e.first_name)+" "+me(e.last_name)})})),t.find((function(t){return t.value==e.data.user.id}))||t.unshift({data:e.data.user,value:e.data.user.id,label:me(e.data.user.first_name)+" "+me(e.data.user.last_name)}),K(n()(t,"label")),null==_||void 0==_){var a;if(null!==(a=V.state)&&void 0!==a&&a.assignee&&t.length>0){var s=V.state.assignee;v(t.find((function(e){return e.value==s}))),je(t.find((function(e){return e.value==s})).data)}else v({data:e.data.user,value:e.data.user.id,label:me(e.data.user.first_name)+" "+me(e.data.user.last_name)}),je(e.data.user);E(me(e.data.user.first_name)+" "+me(e.data.user.last_name))}})):null!=_&&void 0!=_||(v({data:a,value:a.id,label:me(a.first_name)+" "+me(a.last_name)}),E(me(a.first_name)+" "+me(a.last_name)),je(a))}),[C]),Object(c.useEffect)((function(){var e;if(null!==(e=V.state)&&void 0!==e&&e.assignee&&I.length>0){var t=V.state.assignee;console.log("predefined id",t),console.log("found user",I.find((function(e){return e.value==t}))),v(I.find((function(e){return e.value==t}))),E(I.find((function(e){return e.value==t})).label),je(I.find((function(e){return e.value==t})).data),console.log(I.find((function(e){return e.value==t})).data,"from useeffect")}}),[I]);var xe=Object(m.a)({initialValues:{assigneeSelect:sessionStorage.getItem(b.k),assigneeSelectPM:sessionStorage.getItem(b.k),startDate:"",todate:""},validateOnBlur:!0,validateOnChange:!0,validate:function(e){var t={};return e.startDate||(t.startDate="Start Date selection is required"),e.todate||(t.todate="To date selection is required"),t},onSubmit:function(e){console.log("working"),X(e.startDate),te(e.todate);var t=0;Object(j.g)("projects.add_projects")&&Object(j.g)("wbs.change_timecard")&&Object(j.g)("wbs.add_timecard")?b.a.get("wbs/user/time-card/list/"+e.assigneeSelectPM+"/").then((function(a){console.log(a.data.data);var s=[];Array.from(a.data.data).forEach((function(e,t){s.push({data:e})}));var o;o=s.filter((function(t){return t.data.date_updated>=e.startDate&&t.data.date_updated<=e.todate})),A(o);for(var l=[],r=0;r<o.length;r++){var n,c,d=o[r];t+=parseFloat(d.data.hours_today),l.push({WP:null!==(n=d.data.project)&&void 0!==n&&n.work_package_number?d.data.project.work_package_number:"-","Project Name":null!==(c=d.data.project)&&void 0!==c&&c.sub_task?d.data.project.sub_task:"-","Task Title":d.data.project.task_title?d.data.project.task_title:"-",Description:d.data.actual_work_done?d.data.actual_work_done:"-","Hour(s)":d.data.hours_today,Type:d.data.time_type,"Date Created":d.data.date_created,data:d.data})}le(t),T(l)})):b.a.get("wbs/user/time-card/list/"+e.assigneeSelect+"/").then((function(s){var o=[];E(a.first_name+" "+a.last_name),Array.from(s.data.data).forEach((function(e,t){o.push({data:e})}));var l;l=o.filter((function(t){return t.data.date_updated>=e.startDate&&t.data.date_updated<=e.todate})),console.log("timecard for id",l),A(l),ce(l);for(var r=[],n=0;n<l.length;n++){var c,d=l[n];t+=parseFloat(d.data.hours_today),r.push({WP:d.data.project?d.data.project.work_package_number:"-","Project Name":null!=d.data.project?null===(c=d.data.project)||void 0===c?void 0:c.sub_task:"-","Task Title":null!=d.data.project?d.data.project.task_title:"-",Description:d.data.actual_work_done?d.data.actual_work_done:"","Hour(s)":d.data.hours_today,Type:d.data.time_type,"Date Created":d.data.date_created,data:d.data})}console.log("table",r),T(r),le(t)}))}}),ke={option:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{fontSize:"14px !important"})}},we=function(){for(var e=new Date,t=new Date,a=0;a<7;a++){if(0===e.getDay()){console.log("start",e);break}e=f()(e).subtract(1,"day").toDate()}return console.log("end date",t),X(f()(e).format("YYYY-MM-DD")),te(Se()),{start:f()(e).format("YYYY-MM-DD"),end:Se()}},Se=function(){for(var e=new Date,t=0;t<7;t++){if(6===e.getDay()){console.log("sat",e);break}e=f()(e).add(1,"day").toDate()}return e=f()(e).format("YYYY-MM-DD"),console.log("satday",e),e};return Object(y.jsxs)(y.Fragment,{children:[null!=ue&&void 0!=ue&&Object(y.jsx)(k,{data:ue,show:ge,onClose:function(){ye(!1),je(_.data)}}),_&&Object(y.jsx)(x,{employee:_.value,show:fe,onClose:function(){_e(!1),je(_.data)},onAdd:xe.handleSubmit}),Object(y.jsxs)(l.l,{children:[Object(y.jsx)(l.K,{className:"justify-content-between",children:Object(y.jsx)(l.k,{children:Object(y.jsx)("h3",{className:"timecards-page-header mb-3",children:"Actual Hours of this week"})})}),Object(y.jsx)(l.t,{children:Object(y.jsxs)(l.K,{children:[Object(y.jsx)(l.k,{xl:"3",lg:"3",md:"6",children:Object(j.g)("projects.add_projects")&&Object(y.jsxs)("div",{children:[Object(y.jsx)(l.z,{className:"custom-label-5",htmlFor:"assigneeSelectPM",children:"Select Employee"}),Object(y.jsx)(i.a,{closeMenuOnSelect:!0,"aria-labelledby":"assigneeSelectPM",id:"assigneeSelectPM",minHeight:"35px",placeholder:me(a.first_name)+" "+me(a.last_name),isClearable:!1,isMulti:!1,onChange:function(e){v(e),E(e.label),je(e.data)},classNamePrefix:"custom-forminput-6",options:I,styles:ke,value:_})]})}),Object(y.jsx)(l.K,{className:"mt-4",children:Object(y.jsx)(l.k,{})}),Object(y.jsx)(l.K,{children:Object(y.jsx)(l.k,{md:"4",children:Object(y.jsxs)(l.z,{className:"custom-label-5",htmlFor:"assigneeSelect",children:["Employee Name :"," ",me(null===_||void 0===_||null===(e=_.data)||void 0===e?void 0:e.first_name)+" "+me(null===_||void 0===_||null===(t=_.data)||void 0===t?void 0:t.last_name)]})})}),Object(y.jsx)(l.K,{children:Object(y.jsx)(l.k,{children:Object(y.jsxs)(l.z,{className:"custom-label-5",htmlFor:"assigneeSelect",children:["Weekending :"," ",f()(Se()).format("dddd, DD MMMM YYYY")]})})}),xe.values.assigneeSelectPM==sessionStorage.getItem(b.k)==1&&Object(y.jsx)("div",{className:"format-buttons mt-3 mb-3",children:Object(y.jsxs)(l.f,{className:"file-format-download",type:"button",onClick:function(){_e(!0)},children:[" ","+ Add Item"]})}),Object(y.jsx)(l.k,{md:"12",children:Object(y.jsxs)("div",{className:"",children:[Object(y.jsx)(l.m,{items:M,fields:[{key:"WP",_style:{width:"5%"},_classes:"font-weight-bold"},"Project Name","Task Title","Description","Hour(s)","Type","Date Created","Action"],primary:!0,hover:!0,striped:!0,bordered:!0,sorter:!0,size:"sm",itemsPerPage:20,pagination:!0,scopedSlots:{Action:function(e){return Object(y.jsx)("td",{children:0==e.data.submitted?Object(y.jsx)(l.b,{children:Object(y.jsx)(l.f,{onClick:function(){be(e.data),ye(!0)},size:"sm",type:"button",color:"primary",children:"Edit"})}):Object(y.jsx)(l.b,{children:Object(y.jsx)(l.f,{size:"sm",type:"button",color:"secondary",disabled:!0,children:"Edit"})})})}}}),0!=oe&&Object(y.jsx)("div",{class:"alert alert-info",role:"alert",children:Object(y.jsxs)(l.K,{children:[Object(y.jsx)(l.k,{md:"5"}),Object(y.jsx)(l.k,{md:"3",children:Object(y.jsxs)("small",{children:["     ","From ",Object(y.jsx)("b",{children:f()(Q).format("DD-MMM-YY")})," ","to ",Object(y.jsx)("b",{children:f()(ee).format("DD-MMM-YY")})]})}),Object(y.jsx)(l.k,{md:"4",children:Object(y.jsxs)("small",{children:["   ","Total"," ",Object(y.jsxs)("b",{children:[Number(oe).toFixed(2)," ",Number(oe).toFixed(2)>1?"hours":"hour","\xa0"]})]})})]})}),Object(y.jsx)(l.K,{className:"justify-content-end mb-5",children:Object(y.jsx)(l.k,{md:"1",className:"justify-content-end",children:Object(y.jsx)(l.f,{className:"file-format-download",type:"button",onClick:function(){O()({title:"Are you sure?",text:"Once submitted, you will not be able to revert!",icon:"warning",buttons:!0,dangerMode:!0}).then((function(e){if(e){for(var t="",a=0;a<M.length;a++)a==M.length-1?t+=M[a].data.id:t+=M[a].data.id+",";var s=function(){var e=new h.default("portrait","pt","A4");e.setFontSize(15),_.data.first_name,_.data.last_name;var t={startY:145,head:[["WP","Project Name","Task Title","Description","Hour(s)","Type","Date Created"]],body:P.map((function(e,t){return[e.data.project.work_package_number,e.data.project.sub_task,e.data.project.task_title,e.data.actual_work_done,e.data.hours_today,e.data.time_type,e.data.date_created]}))},a=new Date,s=a.toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});a=f()(a).format("DD/MM/YY");var o=f()(ee).format("DD/MM/YYYY");return e.setFontSize(17),e.text(170,50,"Datasoft Manufacturing & Assembly"),e.setFontSize(13),e.text(245,75,"Gulshan Branch"),e.setFontSize(11),e.text(42,105,"Employee Time Card"),e.text(410,105,"Week-Ending: "+o),e.text(42,125,"Name: "+_.data.first_name+" "+_.data.last_name),new Date,e.autoTable(t),e.text(42,e.lastAutoTable.finalY+25,"From "+Q+" to "+ee),e.text(250,e.lastAutoTable.finalY+25," Total Hours "+Number(oe).toFixed(2)),e.text(396,e.lastAutoTable.finalY+25,"Submitted on : "+s+"  "+a),e}(),o=new FormData;o.append("employee",_.value),o.append("time_cards",t),o.append("week_start",Q),o.append("week_end",ee),o.append("pdf_file",s.output("datauristring")),b.d.post("wbs/time-card/submit/",o).then((function(e){console.log(e.data);var t=new Date,a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],o=f()(t).format("DD-MM-YYYY");je(_.data),s.save(_.data.first_name+"_"+_.data.last_name+"_"+a+"_"+o+".pdf"),window.open(s.output("bloburl"),"_blank"),O()("Submitted","Your selected time cards are submitted!","success")}))}}))},style:{backgroundColor:"#e55353"},disabled:0==L,children:"Submit"})})})]})})]})})]})]})}},630:function(e,t,a){},806:function(e,t,a){var s=a(170),o=a(25);e.exports=function(e,t,a,l){return null==e?[]:(o(t)||(t=null==t?[]:[t]),o(a=l?void 0:a)||(a=null==a?[]:[a]),s(e,t,a))}}}]);
//# sourceMappingURL=39.c126995d.chunk.js.map