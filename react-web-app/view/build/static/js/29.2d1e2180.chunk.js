(this.webpackJsonpvirtual_office=this.webpackJsonpvirtual_office||[]).push([[29],{1112:function(e,t,a){"use strict";a.r(t);var s=a(16),r=a(31),n=a(0),o=a.n(n),l=(a(1113),a(515)),c=a(492),i=a(787),d=a.n(i),p=a(72),u=a.n(p),j=a(93),h=a(1540),_=a(10),g=a(5);t.default=function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],i=t[1],p=Object(_.g)(),b=Object(n.useState)([]),f=Object(r.a)(b,2),m=f[0],v=f[1],O=Object(n.useState)(),x=Object(r.a)(O,2),k=(x[0],x[1],Object(n.useState)([])),y=Object(r.a)(k,2),N=y[0],w=y[1],S=Object(n.useState)([]),W=Object(r.a)(S,2),A=W[0],P=W[1],D=Object(j.c)((function(e){var t=[];return Array.from(e.projects.pm_projects).forEach((function(e,a){t.push(e)})),console.log("all Projects",t),t})),H=Object(n.useState)([]),B=Object(r.a)(H,2),C=(B[0],B[1]),F=Object(n.useState)(),T=Object(r.a)(F,2),E=(T[0],T[1]),J=Object(n.useState)(),K=Object(r.a)(J,2),M=(K[0],K[1]),z=Object(n.useState)([]),R=Object(r.a)(z,2),q=R[0],G=R[1],I=Object(n.useState)(D),L=Object(r.a)(I,2),Q=(L[0],L[1]),U=Object(n.useState)([]),V=Object(r.a)(U,2),X=(V[0],V[1]),Y=Object(n.useState)([]),Z=Object(r.a)(Y,2),$=Z[0],ee=Z[1],te=Object(n.useState)([]),ae=Object(r.a)(te,2),se=ae[0],re=ae[1],ne=[],oe=[],le=[],ce=[],ie=[],de=function(){for(var e=0;e<oe.length;e++){var t,a=[],r=[];a=Object(s.a)(oe[e]),a=Object(s.a)(u()(a,"id")),t=Object(s.a)(le[e]),r=Object(s.a)(d()(t,"assignee_id")),r=Object(s.a)(u()(r,"assignee_id")),console.log("temp1",a,"temp2",r);for(var n=new Map,o=0;o<r.length;o++)n.set(r[o].assignee_id,!0);for(var l=[],c=0;c<a.length;c++)void 0==n.get(a[c].id)&&(l.push(a[c]),console.log("temp1[i]",a[c].id));console.log("assignees with no wbs",l),ie.push(l),ee(ie)}console.log("final array",ie),X(ie),console.log("project array",ne),console.log("all assignee",oe),console.log("all wbs",le),C(ne)},pe=function(e){var t=[];if(console.log("filter",e),e.find((function(e){return"all"==e.value})))t.push(q),console.log("temp all",t);else{for(var a=0;a<e.length;a++){console.log("options len",e[a].value);for(var s=0;s<D.length;s++)console.log("projects len",D[s]),e[a].value==D[s].project.task_delivery_order.id&&(console.log("id1 ",e[a].value,"id2",D[s].project.task_delivery_order.id),t.push(D[s]),console.log("temp array",t))}console.log("filtered array",t)}Q(t),function(e){re(e),console.log("filtered projects",e),de();for(var t=[],a=0;a<e.length;a++)t.push({data:e[a],name:e[a].project.sub_task,tdo:e[a].project.task_delivery_order.title,id:e[a].project.task_delivery_order.id,startDate:e[a].project.date_created,endDate:e[a].project.planned_delivery_date,plannedHours:e[a].project.planned_hours,remainingHrs:e[a].project.remaining_hours,assignees:e[a].assignees,totalAssignee:e[a].assignees.length,totalWBS:e[a].project.wbs_list.length,noWbsPeople:$[a],totalNoWbsPeople:$[a].length});console.log("filtered details array",t),G(t);for(var s=[],r=0;r<e.length;r++){for(var n=e[r].assignees,o={assignees:[],date_created:e[r].project.date_created,date_updated:e[r].project.date_updated,description:e[r].project.description,estimated_person:e[r].project.estimated_person,id:e[r].project.id,planned_delivery_date:e[r].project.planned_delivery_date,planned_hours:e[r].project.planned_hours,planned_value:e[r].project.planned_value,pm:e[r].project.pm,remaining_hours:e[r].project.remaining_hours,start_date:e[r].project.start_date,status:e[r].project.status,sub_task:e[r].project.sub_task,task_delivery_order:e[r].project.task_delivery_order,task_title:e[r].project.task_title,work_package_index:e[r].project.work_package_index,work_package_number:e[r].project.work_package_number},l=0;l<n.length;l++){var c={assignee:n[l]};o.assignees.push(c)}s.push(o)}i(s),console.log("wbsinfo",s)}(t)};return o.a.useEffect((function(){D.length>0&&0==N.length&&(w(D),function(e){for(var t=[],a=0;a<e.length;a++)oe[a]=e[a].assignees,le[a]=e[a].project.wbs_list,t.push({data:e[a],label:e[a].project.task_delivery_order.title,value:e[a].project.task_delivery_order.id});t.unshift({label:"Select All",value:"all",data:{}}),console.log("options",t[0].data),console.log("allAssignee array",oe),console.log("wbslist",le),console.log("details array ",ce),E(oe),M(le),P(t),de(),console.log("optionprojects",e),re(e);for(var s=0;s<e.length;s++)ce.push({data:e[s],name:e[s].project.sub_task,tdo:e[s].project.task_delivery_order.title,id:e[s].project.task_delivery_order.id,startDate:e[s].project.date_created,endDate:e[s].project.planned_delivery_date,plannedHours:e[s].project.planned_hours,remainingHrs:e[s].project.remaining_hours,assignees:e[s].assignees,totalAssignee:e[s].assignees.length,totalWBS:e[s].project.wbs_list.length,noWbsPeople:ie[s],totalNoWbsPeople:ie[s].length});for(var r=[],n=0;n<e.length;n++){for(var o=e[n].assignees,l={assignees:[],date_created:e[n].project.date_created,date_updated:e[n].project.date_updated,description:e[n].project.description,estimated_person:e[n].project.estimated_person,id:e[n].project.id,planned_delivery_date:e[n].project.planned_delivery_date,planned_hours:e[n].project.planned_hours,planned_value:e[n].project.planned_value,pm:e[n].project.pm,remaining_hours:e[n].project.remaining_hours,start_date:e[n].project.start_date,status:e[n].project.status,sub_task:e[n].project.sub_task,task_delivery_order:e[n].project.task_delivery_order,task_title:e[n].project.task_title,work_package_index:e[n].project.work_package_index,work_package_number:e[n].project.work_package_number},c=0;c<o.length;c++){var d={assignee:o[c]};l.assignees.push(d)}r.push(l)}i(r),console.log("details array",ce),G(ce)}(D))}),[D]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(c.K,{children:[Object(g.jsx)(c.k,{lg:"9"}),Object(g.jsx)(c.k,{lg:"3",className:"mb-3 pl-4",children:Object(g.jsx)(l.a,{className:"custom-forminput-6",placeholder:"Filter by TDOs",searchable:!0,options:A,isMulti:!0,onChange:function(e,t){console.log("select ",e,"action ",t),"select-option"==t.action?e.find((function(e){return"all"==e.value}))?(pe(A.filter((function(e){return"all"!=e.value}))),v(A.filter((function(e){return"all"!=e.value})))):(v(e),pe(e)):"clear"==t.action?(v([]),pe(A.filter((function(e){return"all"!=e.value})))):"remove-value"==t.action&&(v(e),0==e.length?pe(A.filter((function(e){return"all"!=e.value}))):pe(e))},value:m})})]}),Object(g.jsxs)("div",{className:"main-holder-projects",children:[Object(g.jsxs)("h3",{className:"projectsHeader",children:["Project Wise WBS Details (",q.length,")"," "]}),Object(g.jsx)("div",{className:"card-holder1",children:Object(g.jsx)(c.K,{children:Array.from(q).map((function(e,t){return Object(g.jsx)(c.k,{lg:"4",children:Object(g.jsxs)(c.g,{className:"project-card1",children:[" ",Object(g.jsxs)(c.h,{onClick:function(){p.push({pathname:"/dashboard/Projects/my-projects/details/"+se[t].project.work_package_number,state:{project:se[t]}})},children:[Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Project Name: ",e.name]})," "]}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["TDO: ",e.tdo]})," "]}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Start Date:"," ",e.startDate.substring(0,e.startDate.indexOf(" "))]})," "]}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Planned Hours: ",Number(e.plannedHours).toFixed(2)," "]})," "]}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Remaining Hours: ",Number(e.remainingHrs).toFixed(2)," "]})," "]}),Object(g.jsx)("h5",{className:"card-details1",children:Object(g.jsxs)("span",{className:"p-header-3",children:["Planned Delivery Date: ",e.endDate]})}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Assignees(",e.totalAssignee,") :",e.totalAssignee>1&&Array.from(e.assignees).map((function(e,t){return"  "+e.first_name+" "+e.last_name+", "})),e.totalAssignee<=1&&Array.from(e.assignees).map((function(e,t){return"  "+e.first_name+" "+e.last_name}))]})," "]}),Object(g.jsxs)("h5",{className:"card-details1",children:[Object(g.jsxs)("span",{className:"p-header-3",children:["Total Created WBS : ",e.totalWBS]})," "]}),Object(g.jsx)("h5",{className:"card-details1",children:Object(g.jsxs)("span",{className:"p-header-4",children:["Assignees with No WBS (",e.totalNoWbsPeople,") :",e.totalNoWbsPeople>1&&Array.from(e.noWbsPeople).map((function(e,t){return"  "+e.first_name+" "+e.last_name+", "})),e.totalNoWbsPeople<=1&&Array.from(e.noWbsPeople).map((function(e,t){return"  "+e.first_name+" "+e.last_name}))]})})]}),Object(g.jsx)(c.i,{children:Object(g.jsx)(h.a,{type:"button",className:"create-wbs-from-modal float-right",size:"sm",onClick:function(){console.log("wbsinfo",a[t]),p.push({pathname:"/dashboard/WBS/create-wbs",state:{task:a[t]}})},children:"Create WBS"})})]})},t)}))})})]})]})}},1113:function(e,t,a){},670:function(e,t,a){var s=a(165),r=a(698),n=a(703),o=a(166),l=a(704),c=a(162);e.exports=function(e,t,a){var i=-1,d=r,p=e.length,u=!0,j=[],h=j;if(a)u=!1,d=n;else if(p>=200){var _=t?null:l(e);if(_)return c(_);u=!1,d=o,h=new s}else h=t?[]:j;e:for(;++i<p;){var g=e[i],b=t?t(g):g;if(g=a||0!==g?g:0,u&&b===b){for(var f=h.length;f--;)if(h[f]===b)continue e;t&&h.push(b),j.push(g)}else d(h,b,a)||(h!==j&&h.push(b),j.push(g))}return j}},698:function(e,t,a){var s=a(699);e.exports=function(e,t){return!!(null==e?0:e.length)&&s(e,t,0)>-1}},699:function(e,t,a){var s=a(700),r=a(701),n=a(702);e.exports=function(e,t,a){return t===t?n(e,t,a):s(e,r,a)}},700:function(e,t){e.exports=function(e,t,a,s){for(var r=e.length,n=a+(s?1:-1);s?n--:++n<r;)if(t(e[n],n,e))return n;return-1}},701:function(e,t){e.exports=function(e){return e!==e}},702:function(e,t){e.exports=function(e,t,a){for(var s=a-1,r=e.length;++s<r;)if(e[s]===t)return s;return-1}},703:function(e,t){e.exports=function(e,t,a){for(var s=-1,r=null==e?0:e.length;++s<r;)if(a(t,e[s]))return!0;return!1}},704:function(e,t,a){var s=a(168),r=a(705),n=a(162),o=s&&1/n(new s([,-0]))[1]==1/0?function(e){return new s(e)}:r;e.exports=o},705:function(e,t){e.exports=function(){}},787:function(e,t,a){var s=a(164),r=a(670);e.exports=function(e,t){return e&&e.length?r(e,s(t,2)):[]}}}]);
//# sourceMappingURL=29.2d1e2180.chunk.js.map